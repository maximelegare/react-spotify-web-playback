{"version":3,"sources":["../src/index.tsx","../src/components/Actions.tsx","../src/modules/styled.tsx","../src/components/Controls.tsx","../src/components/Slider.tsx","../src/modules/helpers.ts","../src/components/Devices.tsx","../src/components/ClickOutside.tsx","../src/components/icons/Devices.tsx","../src/components/icons/DevicesComputer.tsx","../src/components/icons/DevicesMobile.tsx","../src/components/icons/DevicesSpeaker.tsx","../src/components/ErrorMessage.tsx","../src/components/Info.tsx","../src/components/icons/Favorite.tsx","../src/components/icons/FavoriteOutline.tsx","../src/components/SpotifyLogo.tsx","../src/modules/getters.ts","../src/modules/hooks.ts","../src/modules/spotify.ts","../src/components/Loader.tsx","../src/components/Volume.tsx","../src/components/icons/VolumeHigh.tsx","../src/components/icons/VolumeLow.tsx","../src/components/icons/VolumeMid.tsx","../src/components/icons/VolumeMute.tsx","../src/components/Wrapper.tsx","../src/constants.ts"],"names":["import_react","import_nano_css","addonRule","addonKeyframes","addonJSX","addonStyle","addonStyled","addonNesting","React","Wrapper","RangeSlider","import_colorizr","import_react_range_slider","VolumeHigh","setVolume","memoize","isEqual"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,IAAAA,iBAA2D;AAC3D,wBAAoB;AACpB,yBAAoB;;;ACHpB,IAAAA,gBAAuC;;;ACEvC,mBAAiD;AACjD,sBAAoD;AAEpD,iBAAkC;AAClC,uBAAwC;AAExC,qBAAsC;AACtC,kBAAmC;AAEnC,mBAAoC;AAEpC,oBAAqC;AA8BrC,IAAAC,mBAAmC;AAhBnC,IAAM,WAAO,wBAAO,EAAE,GAAG,2BAAc,CAAC;AAAA,IAExC,YAAAC,OAAU,IAAI;AAAA,IACd,iBAAAC,OAAe,IAAI;AAAA,IACnB,WAAAC,OAAS,IAAI;AAAA,IACb,aAAAC,OAAW,IAAI;AAAA,IACf,cAAAC,OAAY,IAAI;AAAA,IAChB,eAAAC,OAAa,IAAI;AAEjB,IAAM,EAAE,WAAW,KAAK,OAAO,IAAI;AAE5B,IAAM,KAAK,CAAC,UACjB,OAAO,UAAU,WAAW,GAAG,YAAY;;;AD5B7C,IAAM,UAAU,OAAO,KAAK;AAAA,EAC1B;AAAA,IACE,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,kBAAkB;AAAA,EACpB;AAAA,EACA,CAAC,EAAE,MAAM,MAAmB;AAC1B,QAAI,SAAwB;AAAA,MAC1B,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,OAAO;AAAA,MACP,OAAO;AAAA,IACT;AAEA,QAAI,MAAM,WAAW,cAAc;AACjC,eAAS;AAAA,QACP,6BAA6B;AAAA,QAC7B,6BAA6B;AAAA,UAC3B,QAAQ,GAAG,MAAM,CAAC;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,MACL,QAAQ,GAAG,EAAE;AAAA,MACb,GAAG;AAAA,IACL;AAAA,EACF;AAAA,EACA;AACF;AAEA,SAAS,QAAQ,OAAc;AAC7B,QAAM,EAAE,UAAU,QAAQ,OAAO,IAAI;AAErC,SACE,8BAAAC,QAAA,cAAC,WAAQ,uBAAoB,WAAU,OAAO,EAAE,GAAG,OAAO,QAAQ,OAAO,KACtE,QACH;AAEJ;AAEA,IAAO,sBAAQ,oBAAK,OAAO;;;AErD3B,IAAAR,gBAA4B;;;ACA5B,IAAAA,gBAA4B;AAC5B,gCAAiD;;;ACE1C,SAAS,aAAa,OAAoC;AAC/D,QAAM,EAAE,OAAO,SAAS,aAAa,IAAI,MAAM,IAAI,IAAI;AAEvD,SAAO;AAAA,IACL;AAAA,IACA,YAAY;AAAA,IACZ,IAAI,MAAM;AAAA,IACV,OAAO,cAAc,KAAK;AAAA,IAC1B;AAAA,IACA;AAAA,EACF;AACF;AAEO,SAAS,cAAc,OAAsB;AAClD,QAAM,WAAW,KAAK,IAAI,GAAG,MAAM,OAAO,IAAI,OAAK,EAAE,SAAS,CAAC,CAAC;AAEhE,SAAO,MAAM,OAAO,KAAK,OAAK,EAAE,UAAU,QAAQ,GAAG,OAAO;AAC9D;AAEO,SAAS,SAAS,OAAiC;AACxD,SAAO,OAAO,UAAU;AAC1B;AAEO,SAAS,oBAAkC;AAChD,SAAO,IAAI,QAAc,CAAC,SAAS,WAAW;AAC5C,UAAM,YAAY,SAAS,eAAe,gBAAgB;AAE1D,QAAI,CAAC,WAAW;AACd,YAAM,SAAS,SAAS,cAAc,QAAQ;AAE9C,aAAO,KAAK;AACZ,aAAO,OAAO;AACd,aAAO,QAAQ;AACf,aAAO,QAAQ;AACf,aAAO,MAAM;AACb,aAAO,SAAS,MAAM,QAAQ;AAC9B,aAAO,UAAU,CAAC,UAAe,OAAO,IAAI,MAAM,eAAe,MAAM,SAAS,CAAC;AAEjF,eAAS,KAAK,YAAY,MAAM;AAAA,IAClC,OAAO;AACL,cAAQ;AAAA,IACV;AAAA,EACF,CAAC;AACH;AAEO,SAAS,mBAAmB,OAAe;AAChD,QAAM,UAAU,KAAK,MAAO,QAAQ,MAAQ,EAAE;AAC9C,QAAM,UAAU,KAAK,MAAO,SAAS,MAAO,MAAO,EAAE;AACrD,QAAM,QAAQ,KAAK,MAAO,SAAS,MAAO,KAAK,MAAO,EAAE;AAExD,QAAM,QAAkB,CAAC;AAEzB,MAAI,QAAQ,GAAG;AACb,UAAM;AAAA,MACJ,GAAG,QAAQ,SAAS,GAAG,GAAG;AAAA,MAC1B,GAAG,UAAU,SAAS,GAAG,GAAG;AAAA,MAC5B,GAAG,UAAU,SAAS,GAAG,GAAG;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,UAAM,KAAK,GAAG,WAAW,GAAG,UAAU,SAAS,GAAG,GAAG,CAAC;AAAA,EACxD;AAEA,SAAO,MAAM,KAAK,GAAG;AACvB;AAEO,SAAS,YAAY,OAAyB;AACnD,MAAI,CAAC,SAAS,KAAK,GAAG;AACpB,WAAO;AAAA,EACT;AAEA,MAAI,QAAQ,GAAG;AACb,WAAO,QAAQ;AAAA,EACjB;AAEA,SAAO;AACT;AAKO,SAAS,MAAM,QAAgB,SAAS,GAAG;AAChD,QAAM,SAAS,MAAM;AAErB,SAAO,KAAK,MAAM,SAAS,MAAM,IAAI;AACvC;AAEO,SAAS,YAAY,OAAwB;AAClD,QAAM,aAAa,CAAC,SAAS,UAAU,YAAY,QAAQ,OAAO;AAGlE,MAAI,SAAS,MAAM,QAAQ,GAAG,IAAI,IAAI;AACpC,UAAM,CAAC,KAAK,MAAM,EAAE,IAAI,MAAM,MAAM,GAAG;AAGvC,QAAI,QAAQ,aAAa,WAAW,QAAQ,IAAI,KAAK,KAAK,GAAG,WAAW,IAAI;AAC1E,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;;;ADtFA,IAAMS,WAAU,OAAO,KAAK;AAAA,EAC1B;AAAA,IACE,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,UAAU,GAAG,EAAE;AAAA,IACf,YAAY;AAAA,IACZ,QAAQ;AAAA,EACV;AAAA,EACA,CAAC,EAAE,MAAM,OAAoB;AAAA,IAC3B,oBAAoB;AAAA,MAClB,OAAO,MAAM;AAAA,MACb,YAAY;AAAA,MACZ,UAAU,GAAG,EAAE;AAAA,IACjB;AAAA,IAEA,kBAAkB;AAAA,MAEhB,WAAW;AAAA,IACb;AAAA,IAEA,kBAAkB;AAAA,MAEhB,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EACA;AACF;AAEA,SAAS,OAAO,OAAc;AAC5B,QAAM,EAAE,YAAY,aAAa,eAAe,iBAAiB,UAAU,YAAY,OAAO,IAC5F;AAEF,QAAM,oBAAoB,OAAO,EAAE,EAAE,MAA2B;AAC9D,kBAAc,CAAC;AAAA,EACjB;AAEA,QAAM,aAAa,OAAO,eAAe;AAEzC,SACE,8BAAAD,QAAA;AAAA,IAACC;AAAA,IAAA;AAAA,MACC,uBAAoB;AAAA,MACpB,iBAAe;AAAA,MACf,cAAc;AAAA,MACd,cAAc;AAAA,MACd,OAAO;AAAA,QACL,GAAG,OAAO;AAAA,QACV,cAAc,OAAO;AAAA,MACvB;AAAA;AAAA,IAEA,8BAAAD,QAAA,cAAC,SAAI,WAAU,iBAAgB,OAAO,EAAC,YAAW,OAAO,0BAA0B,UAAS,OAAO,uBAAsB,KAAI,mBAAmB,UAAU,CAAE;AAAA,IAC5J,8BAAAA,QAAA;AAAA,MAAC,0BAAAE;AAAA,MAAA;AAAA,QACC,MAAK;AAAA,QACL,WAAU;AAAA,QACV,uBAAoB;AAAA,QACpB,UAAU;AAAA,QACV,QAAQ;AAAA,UACN,SAAS;AAAA,YACP,aAAa;AAAA,YACb,mBAAmB,OAAO;AAAA,YAC1B,YAAY;AAAA,YACZ,WAAW,cAAc,aAAa,IAAI;AAAA,YAC1C,QAAQ,cAAc,OAAO,eAAe,IAAI,OAAO;AAAA,YACvD,SAAS;AAAA,YACT,YAAY,OAAO;AAAA,YACnB,mBAAmB,OAAO;AAAA,YAC1B,YAAY;AAAA,YACZ,OAAM;AAAA,UACR;AAAA,QACF;AAAA,QACA,GAAG;AAAA,QACH,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA;AAAA,IACT;AAAA,IACA,8BAAAF,QAAA,cAAC,SAAI,WAAU,iBAAgB,OAAO,EAAC,YAAW,OAAO,0BAA2B,UAAS,OAAO,uBAAsB,KAAI,mBAAmB,UAAU,CAAE;AAAA,EAC/J;AAEJ;AAEA,IAAO,qBAAQ,oBAAK,MAAM;;;ADW1B,SAAS,SAAS,OAAc;AAC9B,QAAM;AAAA;AAAA,IAEJ;AAAA;AAAA,IAEA;AAAA;AAAA;AAAA;AAAA;AAAA,IAKA;AAAA;AAAA;AAAA;AAAA,IAIA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA;AAAA,EAEF,IAAI;AAIJ,SACE,8BAAAA,QAAA,cAAC,aAGC,8BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,EACF,CACF;AAEJ;AAEA,IAAO,uBAAQ,oBAAK,QAAQ;AAI5B;AAuCa;;;AG/Lb,IAAAR,iBAAyD;;;ACAzD,IAAAA,gBAA0D;AAQ1D,SAAS,aAAa,OAAc;AAClC,QAAM,EAAE,UAAU,UAAU,SAAS,GAAG,KAAK,IAAI;AACjD,QAAM,mBAAe,sBAA8B,IAAI;AACvD,QAAM,cAAU,sBAAO,KAAK;AAE5B,QAAM,kBAAc,sBAAO,CAAC,UAAmC;AAC7D,UAAM,YAAY,aAAa;AAE/B,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ,UAAU;AAAA,IACpB;AAEA,QAAI,MAAM,SAAS,WAAW,QAAQ,SAAS;AAC7C;AAAA,IACF;AAEA,QAAI,aAAa,CAAC,UAAU,SAAS,MAAM,MAAc,GAAG;AAC1D,cAAQ;AAAA,IACV;AAAA,EACF,CAAC;AAED,+BAAU,MAAM;AACd,UAAM,EAAE,QAAQ,IAAI;AAEpB,QAAI,UAAU;AACZ,eAAS,iBAAiB,YAAY,SAAS,IAAI;AACnD,eAAS,iBAAiB,SAAS,SAAS,IAAI;AAAA,IAClD;AAEA,WAAO,MAAM;AACX,eAAS,oBAAoB,YAAY,SAAS,IAAI;AACtD,eAAS,oBAAoB,SAAS,SAAS,IAAI;AAAA,IACrD;AAAA,EACF,GAAG,CAAC,QAAQ,CAAC;AAEb,SACE,8BAAAQ,QAAA,cAAC,SAAI,KAAK,cAAe,GAAG,QACzB,QACH;AAEJ;AAEA,IAAO,2BAAQ,oBAAK,YAAY;;;AClDhC,IAAAR,gBAAkB;AAEH,SAAR,YAA6B,OAAY;AAC9C,SACE,8BAAAQ,QAAA,cAAC,SAAI,QAAO,OAAM,qBAAoB,YAAW,SAAQ,aAAY,OAAM,OAAO,GAAG,SACnF,8BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,GAAE;AAAA,MACF,MAAK;AAAA;AAAA,EACP,CACF;AAEJ;;;ACXA,IAAAR,gBAAkB;AAEH,SAAR,oBAAqC,OAAY;AACtD,SACE,8BAAAQ,QAAA,cAAC,SAAI,QAAO,OAAM,qBAAoB,YAAW,SAAQ,aAAY,OAAM,OAAO,GAAG,SACnF,8BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,GAAE;AAAA,MACF,MAAK;AAAA;AAAA,EACP,CACF;AAEJ;;;ACXA,IAAAR,gBAAkB;AAEH,SAAR,kBAAmC,OAAY;AACpD,SACE,8BAAAQ,QAAA,cAAC,SAAI,QAAO,OAAM,qBAAoB,YAAW,SAAQ,aAAY,OAAM,OAAO,GAAG,SACnF,8BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,GAAE;AAAA,MACF,MAAK;AAAA;AAAA,EACP,CACF;AAEJ;;;ACXA,IAAAR,gBAAkB;AAEH,SAAR,mBAAoC,OAAY;AACrD,SACE,8BAAAQ,QAAA,cAAC,SAAI,QAAO,OAAM,qBAAoB,YAAW,SAAQ,aAAY,OAAM,OAAO,GAAG,SACnF,8BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,GAAE;AAAA,MACF,MAAK;AAAA;AAAA,EACP,CACF;AAEJ;;;ALkBA,IAAMC,WAAU,OAAO,KAAK;AAAA,EAC1B;AAAA,IACE,kBAAkB;AAAA,IAClB,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,UAAU;AAAA,IACV,QAAQ;AAAA,IAER,SAAS;AAAA,MACP,iBAAiB;AAAA,MACjB,cAAc,GAAG,CAAC;AAAA,MAClB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,UAAU,GAAG,EAAE;AAAA,MACf,SAAS,GAAG,EAAE;AAAA,MACd,UAAU;AAAA,MACV,WAAW;AAAA,MAEX,OAAO;AAAA,QACL,YAAY;AAAA,QACZ,cAAc,GAAG,CAAC;AAAA,QAClB,WAAW,GAAG,EAAE;AAAA,QAChB,YAAY;AAAA,MACd;AAAA,MAEA,QAAQ;AAAA,QACN,YAAY;AAAA,QACZ,SAAS;AAAA,QACT,YAAY;AAAA,QAEZ,wBAAwB;AAAA,UACtB,cAAc,GAAG,EAAE;AAAA,QACrB;AAAA,QAEA,MAAM;AAAA,UACJ,SAAS;AAAA,UACT,YAAY,GAAG,CAAC;AAAA,QAClB;AAAA,MACF;AAAA,MAEA,UAAU;AAAA,QACR,YAAY;AAAA,QACZ,YAAY;AAAA,QACZ,aAAa;AAAA,QACb,SAAS;AAAA,QACT,SAAS;AAAA,QACT,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,OAAO;AAAA,MACT;AAAA,IACF;AAAA,IAEA,YAAY;AAAA,MACV,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,UAAU,GAAG,EAAE;AAAA,MACf,QAAQ,GAAG,EAAE;AAAA,MACb,gBAAgB;AAAA,MAChB,OAAO,GAAG,EAAE;AAAA,IACd;AAAA,EACF;AAAA,EACA,CAAC,EAAE,MAAM,MAAmB;AAC1B,UAAM,YAAY,MAAM,WAAW;AACnC,UAAM,YAA2B,YAC7B;AAAA,MACE,QAAQ;AAAA,MACR,MAAM;AAAA,IACR,IACA;AAAA,MACE,CAAC,MAAM,CAAC,GAAG;AAAA,MACX,MAAM;AAAA,MAEN,6BAA6B;AAAA,QAC3B,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AACJ,UAAM,aAA4B,YAC9B;AAAA,MACE,QAAQ,IAAI,GAAG,CAAC;AAAA,MAChB,WAAW;AAAA,MACX,MAAM,GAAG,EAAE;AAAA,IACb,IACA;AAAA,MACE,CAAC,MAAM,MAAM,QAAQ,kBAAkB,YAAY,GAAG;AAAA,MACtD,CAAC,MAAM,CAAC,GAAG;AAAA,MACX,MAAM,GAAG,EAAE;AAAA,MAEX,6BAA6B;AAAA,QAC3B,MAAM;AAAA,QACN,OAAO,GAAG,EAAE;AAAA,MACd;AAAA,IACF;AAEJ,WAAO;AAAA,MACL,YAAY;AAAA,QACV,OAAO,MAAM;AAAA,MACf;AAAA,MAEA,SAAS;AAAA,QACP,GAAG;AAAA,QAEH,UAAU;AAAA,MACZ;AAAA,IACF;AAAA,EACF;AAAA,EACA;AACF;AAEA,IAAM,aAAa,OAAO,KAAK,EAAE;AAAA,EAC/B,GAAG;AAAA,IACD,YAAY;AAAA,IAEZ,oBAAoB;AAAA,MAClB,YAAY;AAAA,MACZ,cAAc,GAAG,CAAC;AAAA,IACpB;AAAA,IAEA,oBAAoB;AAAA,MAClB,YAAY;AAAA,MACZ,SAAS;AAAA,MAET,MAAM;AAAA,QACJ,SAAS;AAAA,QACT,YAAY,GAAG,CAAC;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AACF,CAAC;AAED,SAAS,cAAc,MAAc;AACnC,MAAI,KAAK,YAAY,EAAE,SAAS,SAAS,GAAG;AAC1C,WAAO,+BAAAD,QAAA,cAAC,wBAAmB;AAAA,EAC7B;AAEA,MAAI,KAAK,YAAY,EAAE,SAAS,UAAU,GAAG;AAC3C,WAAO,+BAAAA,QAAA,cAAC,yBAAoB;AAAA,EAC9B;AAEA,SAAO,+BAAAA,QAAA,cAAC,uBAAkB;AAC5B;AAEe,SAAR,QAAyB,OAAc;AAC5C,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,QAAQ,EAAE,MAAM;AAAA,EAClB,IAAI;AACJ,QAAM,CAAC,QAAQ,OAAO,QAAI,yBAAS,IAAI;AAEvC,QAAM,uBAAuB,CAAC,UAAmC;AAC/D,UAAM,EAAE,QAAQ,IAAI,MAAM;AAG1B,QAAI,QAAQ,IAAI;AACd,oBAAc,QAAQ,EAAE;AAExB,cAAQ,KAAK;AAAA,IACf;AAAA,EACF;AAEA,QAAM,4BAAwB,4BAAY,MAAM;AAC9C,YAAQ,OAAK,CAAC,CAAC;AAAA,EACjB,GAAG,CAAC,CAAC;AAEL,QAAM,EAAE,eAAe,aAAa,IAAI,QAAQ;AAAA,IAC9C,CAAC,KAAK,WAAW;AACf,UAAI,OAAO,OAAO,iBAAiB;AACjC,YAAI,gBAAgB;AAAA,MACtB,OAAO;AACL,YAAI,aAAa,KAAK,MAAM;AAAA,MAC9B;AAEA,aAAO;AAAA,IACT;AAAA,IACA,EAAE,eAAe,MAAM,cAAc,CAAC,EAAE;AAAA,EAC1C;AAEA,MAAI,OAAO,+BAAAA,QAAA,cAAC,iBAAY;AAExB,MAAI,YAAY,iBAAiB,cAAc,OAAO,UAAU;AAC9D,WAAO,cAAc,cAAc,IAAI;AAAA,EACzC;AAEA,SACE,+BAAAA,QAAA,cAAC,wBAAa,UAAU,QAAQ,SAAS,yBACvC,+BAAAA,QAAA;AAAA,IAACC;AAAA,IAAA;AAAA,MACC,uBAAoB;AAAA,MACpB,kBAAgB;AAAA,MAChB,OAAO;AAAA,QACL,GAAG;AAAA,QACH;AAAA,QACA,GAAG;AAAA,MACL;AAAA;AAAA,IAEC,CAAC,CAAC,QAAQ,UACT,+BAAAD,QAAA,6BAAAA,QAAA,gBACG,UACC,+BAAAA,QAAA,cAAC,aACE,iBACC,+BAAAA,QAAA,cAAC,kBACC,+BAAAA,QAAA,cAAC,WAAG,OAAO,aAAc,GACzB,+BAAAA,QAAA,cAAC,WACE,cAAc,cAAc,IAAI,GACjC,+BAAAA,QAAA,cAAC,cAAM,cAAc,IAAK,CAC5B,CACF,GAED,CAAC,CAAC,aAAa,UACd,+BAAAA,QAAA,6BAAAA,QAAA,gBACE,+BAAAA,QAAA,cAAC,WAAG,OAAO,YAAa,GACvB,aAAa,IAAI,YAChB,+BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,KAAK,OAAO;AAAA,QACZ,cAAY,OAAO;AAAA,QACnB,WAAS,OAAO;AAAA,QAChB,SAAS;AAAA,QACT,MAAK;AAAA;AAAA,MAEJ,cAAc,OAAO,IAAI;AAAA,MAC1B,+BAAAA,QAAA,cAAC,cAAM,OAAO,IAAK;AAAA,IACrB,CACD,CACH,GAEF,+BAAAA,QAAA,cAAC,YAAK,CACR,GAEF,+BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,cAAY,OAAO;AAAA,QACnB,SAAS;AAAA,QACT,OAAO,OAAO;AAAA,QACd,MAAK;AAAA;AAAA,MAEJ;AAAA,IACH,CACF;AAAA,EAEJ,CACF;AAEJ;;;AMrRA,IAAAR,iBAAkB;AAKlB,IAAMS,WAAU,OAAO,KAAK;AAAA,EAC1B;AAAA,IACE,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,WAAW;AAAA,IACX,OAAO;AAAA,EACT;AAAA,EACA,CAAC,EAAE,MAAM,OAAoB;AAAA,IAC3B,iBAAiB,MAAM;AAAA,IACvB,WAAW,aAAa,MAAM;AAAA,IAC9B,OAAO,MAAM;AAAA,IACb,QAAQ,GAAG,MAAM,CAAC;AAAA,EACpB;AAAA,EACA;AACF;AAEe,SAAR,aAA8B;AAAA,EACnC;AAAA,EACA,QAAQ,EAAE,SAAS,YAAY,OAAO;AACxC,GAAoB;AAClB,SACE,+BAAAD,QAAA,cAACC,UAAA,EAAQ,uBAAoB,gBAAe,OAAO,EAAE,SAAS,YAAY,GAAG,OAAO,KACjF,QACH;AAEJ;;;AC/BA,IAAAT,iBAAoE;AACpE,IAAAW,mBAAqB;;;ACDrB,IAAAX,iBAAkB;AAEH,SAAR,SAA0B,OAAY;AAC3C,SACE,+BAAAQ,QAAA,cAAC,SAAI,QAAO,OAAM,qBAAoB,YAAW,SAAQ,aAAY,OAAM,OAAO,GAAG,SACnF,+BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,GAAE;AAAA,MACF,MAAK;AAAA;AAAA,EACP,CACF;AAEJ;;;ACXA,IAAAR,iBAAkB;AAEH,SAAR,gBAAiC,OAAY;AAClD,SACE,+BAAAQ,QAAA,cAAC,SAAI,QAAO,OAAM,qBAAoB,YAAW,SAAQ,aAAY,OAAM,OAAO,GAAG,SACnF,+BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,GAAE;AAAA,MACF,MAAK;AAAA;AAAA,EACP,CACF;AAEJ;;;ACXA,IAAAR,iBAAkB;AAClB,sBAA0B;AAMX,SAAR,YAA6B,EAAE,SAAS,GAAG,KAAK,GAAU;AAC/D,SACE,+BAAAQ,QAAA,cAAC,SAAI,QAAO,OAAM,qBAAoB,YAAW,SAAQ,eAAc,OAAM,SAAS,GAAG,QACvF,+BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,GAAE;AAAA,MACF,UAAM,2BAAU,OAAO;AAAA;AAAA,EACzB,CACF;AAEJ;;;ACdO,SAAS,UAAU,QAAkC;AAC1D,SAAO;AAAA,IACL,eAAe;AAAA,IACf,SAAS;AAAA,IACT,MAAM;AAAA,IACN,cAAc;AAAA,IACd,OAAO;AAAA,IACP,MAAM;AAAA,IACN,UAAU;AAAA,IACV,aAAa;AAAA,IACb,WAAW;AAAA,IACX,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,GAAG;AAAA,EACL;AACF;AAEO,SAAS,gBAAgB,QAAqC;AACnE,SAAO;AAAA,IACL,aAAa;AAAA,IACb,UAAU;AAAA,IACV,SAAS;AAAA,IACT,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,QAAQ;AAAA,IACR,aAAa;AAAA,IACb,YAAY;AAAA,IACZ,aAAa;AAAA,IACb,0BAA0B;AAAA,IAC1B,mBAAmB;AAAA,IACnB,cAAc;AAAA,IACd,yBAAyB;AAAA,IACzB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,gBAAgB;AAAA,IAChB,GAAG;AAAA,EACL;AACF;AAEO,SAAS,eAAe,KAAqB;AAClD,QAAM,CAAC,EAAE,OAAO,IAAI,KAAK,EAAE,IAAI,IAAI,MAAM,GAAG;AAE5C,SAAO,4BAA4B,QAAQ;AAC7C;AAEO,SAAS,oBAAoB,MAAc,QAAwB;AACxE,SAAO,OAAO,QAAQ,UAAU,IAAI;AACtC;AAEO,SAAS,kBAAkB,KAAqB;AACrD,QAAM,CAAC,EAAE,OAAO,EAAE,IAAI,IAAI,MAAM,GAAG;AAEnC,SAAO;AACT;;;ACvDA,IAAAR,iBAA4C;AAErC,SAAS,cAAc,OAAwB;AACpD,QAAM,aAAa,CAAC,UAA2B;AAC7C,WAAO,OAAO,WAAW,KAAK,EAAE;AAAA,EAClC;AAEA,QAAM,CAAC,SAAS,UAAU,QAAI,yBAAkB,WAAW,KAAK,CAAC;AAEjE,WAAS,eAAe;AACtB,eAAW,WAAW,KAAK,CAAC;AAAA,EAC9B;AAEA,gCAAU,MAAM;AACd,UAAM,aAAa,OAAO,WAAW,KAAK;AAG1C,iBAAa;AAEb,QAAI;AACF,iBAAW,iBAAiB,UAAU,YAAY;AAAA,IACpD,QAAE;AAGA,iBAAW,YAAY,YAAY;AAAA,IACrC;AAEA,WAAO,MAAM;AACX,UAAI;AACF,mBAAW,oBAAoB,UAAU,YAAY;AAAA,MACvD,QAAE;AAGA,mBAAW,eAAe,YAAY;AAAA,MACxC;AAAA,IACF;AAAA,EAEF,GAAG,CAAC,KAAK,CAAC;AAEV,SAAO;AACT;AAEO,SAAS,YAAe,OAAa;AAC1C,QAAM,UAAW,uBAAU;AAE3B,gCAAU,MAAM;AACd,QAAI,UAAU;AAAA,EAChB,GAAG,CAAC,KAAK,CAAC;AAEV,SAAO,IAAI;AACb;;;AC/CA,eAAsB,kBAAkB,OAAe,QAA2B;AAChF,QAAM,MAAM,MAAM,QAAQ,MAAM,IAAI,SAAS,CAAC,MAAM;AAEpD,SAAO,MAAM,qDAAqD,OAAO;AAAA,IACvE,SAAS;AAAA,MACP,eAAe,UAAU;AAAA,MACzB,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,EACV,CAAC,EAAE,KAAK,OAAK,EAAE,KAAK,CAAC;AACvB;AAEA,eAAsB,WAAW,OAAe;AAC9C,SAAO,MAAM,gDAAgD;AAAA,IAC3D,SAAS;AAAA,MACP,eAAe,UAAU;AAAA,MACzB,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,EACV,CAAC,EAAE,KAAK,OAAK,EAAE,KAAK,CAAC;AACvB;AAEA,eAAsB,iBAAiB,OAAe;AACpD,SAAO,MAAM,wCAAwC;AAAA,IACnD,SAAS;AAAA,MACP,eAAe,UAAU;AAAA,MACzB,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,EACV,CAAC,EAAE,KAAK,OAAK;AACX,QAAI,EAAE,WAAW,KAAK;AACpB,aAAO;AAAA,IACT;AAEA,WAAO,EAAE,KAAK;AAAA,EAChB,CAAC;AACH;AAEA,eAAsB,MAAM,OAAe;AACzC,SAAO,MAAM,8CAA8C;AAAA,IACzD,SAAS;AAAA,MACP,eAAe,UAAU;AAAA,MACzB,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,EACV,CAAC;AACH;AAEA,eAAsB,KACpB,OACA,EAAE,aAAa,UAAU,SAAS,GAAG,KAAK,GAC1C;AACA,MAAI;AAEJ,MAAI,aAAa;AACf,UAAM,WAAW,YAAY,QAAQ,QAAQ,KAAK;AAClD,QAAI;AAGJ,QAAI,CAAC,UAAU;AACb,iBAAW,EAAE,UAAU,OAAO;AAAA,IAChC;AAEA,WAAO,KAAK,UAAU,EAAE,aAAa,QAAQ,SAAS,CAAC;AAAA,EACzD,WAAW,MAAM,QAAQ,IAAI,KAAK,KAAK,QAAQ;AAC7C,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,EAAE,UAAU,OAAO,EAAE,CAAC;AAAA,EAC9D;AAEA,SAAO,MAAM,uDAAuD,YAAY;AAAA,IAC9E;AAAA,IACA,SAAS;AAAA,MACP,eAAe,UAAU;AAAA,MACzB,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,EACV,CAAC;AACH;AAsBA,eAAsB,aAAa,OAAe,QAA2B;AAC3E,QAAM,MAAM,MAAM,QAAQ,MAAM,IAAI,SAAS,CAAC,MAAM;AAEpD,SAAO,MAAM,wCAAwC;AAAA,IACnD,MAAM,KAAK,UAAU,GAAG;AAAA,IACxB,SAAS;AAAA,MACP,eAAe,UAAU;AAAA,MACzB,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,EACV,CAAC;AACH;AAEA,eAAsB,WAAW,OAAe,QAA2B;AACzE,QAAM,MAAM,MAAM,QAAQ,MAAM,IAAI,SAAS,CAAC,MAAM;AAEpD,SAAO,MAAM,wCAAwC;AAAA,IACnD,MAAM,KAAK,UAAU,EAAE,IAAI,CAAC;AAAA,IAC5B,SAAS;AAAA,MACP,eAAe,UAAU;AAAA,MACzB,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,EACV,CAAC;AACH;AAEA,eAAsB,KAAK,OAAe,UAAkB;AAC1D,SAAO,MAAM,yDAAyD,YAAY;AAAA,IAChF,SAAS;AAAA,MACP,eAAe,UAAU;AAAA,MACzB,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,EACV,CAAC;AACH;AAEA,eAAsB,UAAU,OAAe,UAAkB,YAAsB;AACrF,SAAO,MAAM,wCAAwC;AAAA,IACnD,MAAM,KAAK,UAAU,EAAE,YAAY,CAAC,QAAQ,GAAG,MAAM,WAAW,CAAC;AAAA,IACjE,SAAS;AAAA,MACP,eAAe,UAAU;AAAA,MACzB,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,EACV,CAAC;AACH;AAEA,eAAsB,UAAU,OAAe,QAAgB;AAC7D,SAAO,MAAM,8DAA8D,UAAU;AAAA,IACnF,SAAS;AAAA,MACP,eAAe,UAAU;AAAA,MACzB,gBAAgB;AAAA,IAClB;AAAA,IACA,QAAQ;AAAA,EACV,CAAC;AACH;;;ANjIA,IAAM,YAAY;AAClB,IAAM,WAAW;AAEjB,IAAMS,WAAU,OAAO,KAAK;AAAA,EAC1B;AAAA,IACE,WAAW;AAAA,IAEX,OAAO;AAAA,MACL,SAAS;AAAA,MACT,gBAAgB;AAAA,MAChB,WAAW,GAAG,EAAE;AAAA,MAChB,UAAU,GAAG,EAAE;AAAA,MAEf,WAAW;AAAA,QACT,gBAAgB;AAAA,MAClB;AAAA,IACF;AAAA,IAEA,QAAQ;AAAA,MACN,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,UAAU,GAAG,EAAE;AAAA,MACf,QAAQ,GAAG,WAAW,CAAC;AAAA,MACvB,gBAAgB;AAAA,MAChB,OAAO,GAAG,QAAQ;AAAA,IACpB;AAAA,EACF;AAAA,EACA,CAAC,EAAE,MAAM,MAAmB;AAC1B,UAAM,kBAAkB,MAAM,WAAW;AACzC,UAAM,SAAwB,CAAC;AAE/B,QAAI,iBAAiB;AACnB,aAAO,eAAe,iBAAa,uBAAK,MAAM,GAAG,EAAE;AACnD,aAAO,KAAK,IAAI;AAAA,QACd,SAAS;AAAA,QACT,QAAQ;AAAA,QACR,UAAU,GAAG,GAAG;AAAA,QAChB,eAAe;AAAA,QACf,UAAU;AAAA,QAEV,KAAK;AAAA,UACH,SAAS;AAAA,UACT,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU;AAAA,UACV,OAAO;AAAA,UACP,KAAK;AAAA,QACP;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO,aAAa;AACpB,aAAO,UAAU;AACjB,aAAO,YAAY,GAAG,EAAE;AACxB,aAAO,2BAA2B,IAAI;AAAA,QACpC,cAAc,iBAAa,uBAAK,MAAM,GAAG,EAAE;AAAA,QAC3C,aAAa,GAAG,CAAC;AAAA,QACjB,SAAS;AAAA,QACT,OAAO;AAAA,MACT;AACA,aAAO,MAAM;AAAA,QACX,QAAQ,GAAG,SAAS;AAAA,QACpB,OAAO,GAAG,SAAS;AAAA,MACrB;AACA,aAAO,gBAAgB,IAAI;AAAA,QACzB,6BAA6B;AAAA,UAC3B,SAAS;AAAA,QACX;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,MACL,QAAQ;AAAA,QACN,OAAO,MAAM;AAAA,QAEb,kBAAkB;AAAA,UAChB,OAAO,MAAM;AAAA,QACf;AAAA,MACF;AAAA,MAEA,GAAG;AAAA,IACL;AAAA,EACF;AAAA,EACA;AACF;AAEA,IAAM,iBAAiB,OAAO,KAAK;AAAA,EACjC;AAAA,IACE,SAAS;AAAA,IACT,eAAe;AAAA,IACf,gBAAgB;AAAA,IAEhB,OAAO;AAAA,MACL,UAAU,GAAG,EAAE;AAAA,MACf,WAAW,GAAG,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EACA,CAAC,EAAE,MAAM,MAAmB;AAC1B,UAAM,kBAAkB,MAAM,WAAW;AACzC,UAAM,SAAwB,CAAC;AAE/B,QAAI,iBAAiB;AACnB,aAAO,UAAU,GAAG,CAAC;AACrB,aAAO,QAAQ;AAAA,IACjB,OAAO;AACL,aAAO,YAAY,GAAG,SAAS;AAE/B,UAAI,CAAC,MAAM,cAAc;AACvB,eAAO,aAAa,GAAG,CAAC;AACxB,eAAO,QAAQ,eAAe,GAAG,YAAY,CAAC;AAAA,MAChD,OAAO;AACL,eAAO,QAAQ;AAAA,MACjB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EACA;AACF;AAEA,IAAM,UAAU,OAAO,KAAK;AAAA,EAC1B;AAAA,IACE,SAAS;AAAA,IACT,gBAAgB;AAAA,IAEhB,sCAAsC;AAAA,MACpC,UAAU;AAAA,MAEV,KAAK;AAAA,QACH,YAAY,IAAI,GAAG,CAAC;AAAA,QACpB,YAAY;AAAA,MACd;AAAA,IACF;AAAA,IAEA,GAAG;AAAA,MACD,UAAU,GAAG,EAAE;AAAA,MACf,YAAY;AAAA,MACZ,aAAa,GAAG,CAAC;AAAA,MACjB,cAAc,GAAG,CAAC;AAAA,MAClB,OAAO;AAAA,MAEP,oBAAoB;AAAA,QAClB,YAAY;AAAA,QACZ,SAAS;AAAA,MACX;AAAA,MAEA,oBAAoB;AAAA,QAClB,UAAU,GAAG,EAAE;AAAA,MACjB;AAAA,IACF;AAAA,IAEA,MAAM;AAAA,MACJ,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EACA,CAAC,EAAE,MAAM,MAAmB;AAC1B,WAAO;AAAA,MACL,sCAAsC;AAAA,QACpC,OAAO,MAAM;AAAA,QACb,UAAU,eAAe,GAAG,MAAM,eAAe,WAAW,CAAC;AAAA,QAE7D,KAAK;AAAA,UACH,sBAAsB,wCAAwC,MAAM,gBAAgB,MAAM;AAAA,QAC5F;AAAA,MACF;AAAA,MACA,GAAG;AAAA,QACD,oBAAoB;AAAA,UAClB,OAAO,MAAM;AAAA,UAEb,GAAG;AAAA,YACD,OAAO,MAAM;AAAA,UACf;AAAA,QACF;AAAA,QAEA,oBAAoB;AAAA,UAClB,OAAO,MAAM;AAAA,UAEb,GAAG;AAAA,YACD,OAAO,MAAM;AAAA,UACf;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EACA;AACF;AAEA,SAAS,KAAK,OAAc;AAC1B,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,QAAQ,EAAE,aAAa,SAAS,OAAO,QAAQ,kBAAkB,eAAe;AAAA,IAChF;AAAA,IACA,OAAO,EAAE,UAAU,CAAC,GAAG,IAAI,OAAO,MAAM,IAAI;AAAA,IAC5C;AAAA,EACF,IAAI;AACJ,QAAM,CAAC,SAAS,UAAU,QAAI,yBAAS,KAAK;AAC5C,QAAM,gBAAY,uBAAO,KAAK;AAC9B,QAAM,aAAa,YAAY,EAAE;AACjC,QAAM,kBAAkB,WAAW;AAEnC,QAAM,cAAc,CAAC,UAAmB;AACtC,QAAI,CAAC,UAAU,SAAS;AACtB;AAAA,IACF;AAEA,eAAW,KAAK;AAAA,EAClB;AAEA,QAAM,YAAY,YAAY;AAC5B,QAAI,CAAC,UAAU,SAAS;AACtB;AAAA,IACF;AAEA,QAAI,qBAAqB,IAAI;AAC3B,wBAAkB,CAAC,cAAuB;AACxC,oBAAY,SAAS;AAAA,MACvB,CAAC;AAAA,IACH;AAEA,UAAM,SAAS,MAAM,kBAAkB,OAAO,EAAE;AAChD,UAAM,CAAC,UAAU,IAAI,UAAU,CAAC,KAAK;AAErC,gBAAY,UAAU;AACtB,2BAAuB,OAAO;AAAA,EAChC;AAEA,gCAAU,MAAM;AACd,cAAU,UAAU;AAEpB,QAAI,gBAAgB,IAAI;AACtB,gBAAU;AAAA,IACZ;AAEA,WAAO,MAAM;AACX,gBAAU,UAAU;AAAA,IACtB;AAAA,EAEF,GAAG,CAAC,CAAC;AAEL,gCAAU,MAAM;AACd,QAAI,gBAAgB,eAAe,MAAM,IAAI;AAC3C,kBAAY,KAAK;AAEjB,gBAAU;AAAA,IACZ;AAAA,EACF,CAAC;AAED,QAAM,kBAAkB,YAAY;AAClC,QAAI,SAAS;AACX,YAAM,aAAa,OAAO,EAAE;AAC5B,kBAAY,KAAK;AAAA,IACnB,OAAO;AACL,YAAM,WAAW,OAAO,EAAE;AAC1B,kBAAY,IAAI;AAAA,IAClB;AAEA,2BAAuB,CAAC,OAAO;AAAA,EACjC;AAEA,QAAM,QAAQ,oBAAoB,MAAM,OAAO,KAAK;AACpD,MAAI;AAGJ,MAAI,gBAAgB,IAAI;AACtB,eACE,+BAAAD,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,cAAY,UAAU,OAAO,cAAc,OAAO;AAAA,QAClD,WAAW,UAAU,iBAAiB;AAAA,QACtC,SAAS;AAAA,QACT,OAAO,UAAU,OAAO,cAAc,OAAO;AAAA,QAC7C,MAAK;AAAA;AAAA,MAEJ,UAAU,+BAAAA,QAAA,cAAC,cAAS,IAAK,+BAAAA,QAAA,cAAC,qBAAgB;AAAA,IAC7C;AAAA,EAEJ;AAEA,QAAM,UAAqC,CAAC;AAC5C,QAAM,UAAU,CAAC;AAEjB,MAAI,UAAU;AACZ,YAAQ,KAAK,cAAc;AAAA,EAC7B;AAEA,MAAI,iBAAiB;AACnB,YAAQ,QAAQ,+BAAAA,QAAA,cAAC,SAAI,KAAK,MAAM,KAAK,OAAO;AAAA,EAC9C;AAEA,MAAI,CAAC,IAAI;AACP,WAAO,+BAAAA,QAAA,cAAC,WAAI;AAAA,EACd;AAEA,SACE,+BAAAA,QAAA;AAAA,IAACC;AAAA,IAAA;AAAA,MACC,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,uBAAoB;AAAA,MACpB,OAAO;AAAA,QACL;AAAA,QACA,GAAG;AAAA,QACH,GAAG;AAAA,QACH;AAAA,QACA;AAAA,MACF;AAAA;AAAA,IAEC,CAAC,gBACA,+BAAAD,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,cAAY;AAAA,QACZ,MAAM,eAAe,GAAG;AAAA,QACxB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP;AAAA;AAAA,MAEA,+BAAAA,QAAA,cAAC,SAAI,KAAK,MAAM,KAAK,OAAO;AAAA,IAC9B;AAAA,IAEF,+BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,OAAO;AAAA,UACL;AAAA,UACA;AAAA,UACA;AAAA,QACF;AAAA;AAAA,MAEC,CAAC,CAAC,QACD,+BAAAA,QAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,YACL;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,UACF;AAAA;AAAA,QAEA,+BAAAA,QAAA,cAAC,SAAI,aAAU,0BACb,+BAAAA,QAAA,cAAC,aACC,+BAAAA,QAAA,cAAC,WACC,+BAAAA,QAAA,cAAC,cACC,+BAAAA,QAAA;AAAA,UAAC;AAAA;AAAA,YACC,cAAY;AAAA,YACZ,MAAM,eAAe,GAAG;AAAA,YACxB,KAAI;AAAA,YACJ,QAAO;AAAA,YACP;AAAA;AAAA,UAEC;AAAA,QACH,CACF,CACF,GACA,+BAAAA,QAAA,cAAC,OAAE,OAAO,QAAQ,IAAI,OAAK,EAAE,IAAI,EAAE,KAAK,IAAI,KACzC,QAAQ,IAAI,CAAC,QAAQ,UAAU;AAC9B,gBAAM,cAAc,oBAAoB,OAAO,MAAM,OAAO,KAAK;AAEjE,iBACE,+BAAAA,QAAA,cAAC,UAAK,KAAK,OAAO,OACf,QAAQ,OAAO,IAChB,+BAAAA,QAAA;AAAA,YAAC;AAAA;AAAA,cACC,cAAY;AAAA,cACZ,MAAM,eAAe,OAAO,GAAG;AAAA,cAC/B,KAAI;AAAA,cACJ,QAAO;AAAA,cACP,OAAO;AAAA;AAAA,YAEN,OAAO;AAAA,UACV,CACF;AAAA,QAEJ,CAAC,CACH,CACF,CACF;AAAA,QACC;AAAA,MACH;AAAA,MAED,CAAC,mBACA,+BAAAA,QAAA;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,MAAM,eAAe,GAAG;AAAA,UACxB,KAAI;AAAA,UACJ,QAAO;AAAA;AAAA,QAEP,+BAAAA,QAAA,cAAC,eAAY,SAAkB;AAAA,MACjC;AAAA,IAEJ;AAAA,EACF;AAEJ;AAEA,IAAO,mBAAQ,qBAAK,IAAI;;;AOpaxB,IAAAR,iBAAkB;AAKlB,IAAMS,WAAU,OAAO,KAAK;AAAA,EAC1B;AAAA,IACE,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,UAAU;AAAA,IAEV,SAAS;AAAA,MACP,cAAc;AAAA,MACd,aAAa;AAAA,MACb,aAAa;AAAA,MACb,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,UAAU;AAAA,MACV,KAAK;AAAA,MACL,WAAW;AAAA,MACX,OAAO;AAAA,IACT;AAAA,EACF;AAAA,EACA,CAAC,EAAE,MAAM,MAAmB;AAC1B,UAAM,QAAQ,UAAW;AAAA,MACvB,MAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO;AAAA,MACT;AAAA,MAEA,OAAO;AAAA,QACL,aAAa,GAAG,CAAC;AAAA,QACjB,QAAQ,GAAG,MAAM,UAAU;AAAA,QAC3B,SAAS;AAAA,QACT,OAAO,GAAG,MAAM,UAAU;AAAA,MAC5B;AAAA,MAEA,QAAQ;AAAA,QACN,aAAa;AAAA,QACb,QAAQ,GAAG,MAAM,UAAU;AAAA,QAC3B,SAAS;AAAA,QACT,OAAO,GAAG,MAAM,UAAU;AAAA,MAC5B;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL,QAAQ,GAAG,MAAM,CAAC;AAAA,MAElB,SAAS;AAAA,QACP,WAAW,GAAG;AAAA,QACd,aAAa,MAAM;AAAA,QACnB,QAAQ,GAAG,MAAM,UAAU;AAAA,QAC3B,OAAO,GAAG,MAAM,UAAU;AAAA,MAC5B;AAAA,IACF;AAAA,EACF;AAAA,EACA;AACF;AAEe,SAAR,OAAwB,EAAE,QAAQ,EAAE,QAAQ,aAAa,WAAW,EAAE,GAAoB;AAC/F,SACE,+BAAAD,QAAA,cAACC,UAAA,EAAQ,uBAAoB,UAAS,OAAO,EAAE,GAAG,QAAQ,aAAa,WAAW,KAChF,+BAAAD,QAAA,cAAC,WAAI,CACP;AAEJ;;;ACnEA,IAAAR,iBAAgE;AAChE,IAAAY,6BAAiD;;;ACDjD,IAAAZ,iBAAkB;AAEH,SAAR,WAA4B,OAAY;AAC7C,SACE,+BAAAQ,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,uBAAoB;AAAA,MACpB,QAAO;AAAA,MACP,qBAAoB;AAAA,MACpB,SAAQ;AAAA,MACR,OAAM;AAAA,MACL,GAAG;AAAA;AAAA,IAEJ,+BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,GAAE;AAAA,QACF,MAAK;AAAA;AAAA,IACP;AAAA,EACF;AAEJ;;;AClBA,IAAAR,iBAAkB;AAEH,SAAR,UAA2B,OAAY;AAC5C,SACE,+BAAAQ,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,uBAAoB;AAAA,MACpB,QAAO;AAAA,MACP,qBAAoB;AAAA,MACpB,SAAQ;AAAA,MACR,OAAM;AAAA,MACL,GAAG;AAAA;AAAA,IAEJ,+BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,GAAE;AAAA,QACF,MAAK;AAAA;AAAA,IACP;AAAA,EACF;AAEJ;;;AClBA,IAAAR,iBAAkB;AAEH,SAARa,YAA4B,OAAY;AAC7C,SACE,+BAAAL,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,uBAAoB;AAAA,MACpB,QAAO;AAAA,MACP,qBAAoB;AAAA,MACpB,SAAQ;AAAA,MACR,OAAM;AAAA,MACL,GAAG;AAAA;AAAA,IAEJ,+BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,GAAE;AAAA,QACF,MAAK;AAAA;AAAA,IACP;AAAA,EACF;AAEJ;;;AClBA,IAAAR,iBAAkB;AAEH,SAAR,WAA4B,OAAY;AAC7C,SACE,+BAAAQ,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,uBAAoB;AAAA,MACpB,QAAO;AAAA,MACP,qBAAoB;AAAA,MACpB,SAAQ;AAAA,MACR,OAAM;AAAA,MACL,GAAG;AAAA;AAAA,IAEJ,+BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,GAAE;AAAA,QACF,MAAK;AAAA;AAAA,IACP;AAAA,EACF;AAEJ;;;AJKA,IAAM,oBAAoB,OAAO,KAAK;AAAA,EACpC;AAAA,IACE,SAAS;AAAA,IACT,kBAAkB;AAAA,IAClB,UAAU;AAAA,IACV,QAAQ;AAAA,IAER,SAAS;AAAA,MACP,YAAY;AAAA,MACZ,iBAAiB;AAAA,MACjB,cAAc,GAAG,CAAC;AAAA,MAClB,OAAO;AAAA,MACP,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,eAAe;AAAA,MACf,MAAM;AAAA,MACN,SAAS,GAAG,EAAE;AAAA,MACd,UAAU;AAAA,MAEV,UAAU;AAAA,QACR,YAAY;AAAA,QACZ,YAAY;AAAA,QACZ,aAAa;AAAA,QACb,SAAS;AAAA,QACT,SAAS;AAAA,QACT,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,OAAO;AAAA,MACT;AAAA,IACF;AAAA,IAEA,YAAY;AAAA,MACV,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,UAAU,GAAG,EAAE;AAAA,MACf,QAAQ,GAAG,EAAE;AAAA,MACb,gBAAgB;AAAA,MAChB,OAAO,GAAG,EAAE;AAAA,IACd;AAAA,IAEA,8BAA8B;AAAA,MAC5B,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EACA,CAAC,EAAE,MAAM,MAAmB;AAC1B,UAAM,YAAY,MAAM,WAAW;AACnC,UAAM,aAA4B,YAC9B;AAAA,MACE,QAAQ,IAAI,GAAG,CAAC;AAAA,MAChB,WAAW;AAAA,IACb,IACA;AAAA,MACE,CAAC,MAAM,MAAM,QAAQ,kBAAkB,YAAY,GAAG;AAAA,MACtD,CAAC,MAAM,CAAC,GAAG;AAAA,IACb;AAEJ,WAAO;AAAA,MACL,YAAY;AAAA,QACV,OAAO,MAAM;AAAA,MACf;AAAA,MACA,SAAS;AAAA,QACP,CAAC,YAAY,WAAW,MAAM,CAAC,GAAG;AAAA,QAElC,UAAU;AAAA,MACZ;AAAA,IACF;AAAA,EACF;AAAA,EACA;AACF;AAEA,IAAM,gBAAgB,OAAO,KAAK;AAAA,EAChC;AAAA,IACE,SAAS;AAAA,IACT,SAAS,KAAK,GAAG,CAAC;AAAA,IAClB,kBAAkB;AAAA,IAElB,SAAS;AAAA,MACP,SAAS;AAAA,MACT,SAAS,KAAK,GAAG,CAAC;AAAA,MAClB,OAAO,GAAG,GAAG;AAAA,IACf;AAAA,IAEA,UAAU;AAAA,MACR,SAAS;AAAA,MACT,UAAU,GAAG,EAAE;AAAA,IACjB;AAAA,IAEA,8BAA8B;AAAA,MAC5B,YAAY;AAAA,MACZ,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EACA,CAAC,EAAE,MAAM,OAAO;AAAA,IACd,OAAO,MAAM;AAAA,EACf;AAAA,EACA;AACF;AAEe,SAAR,OAAwB,OAAc;AAC3C,QAAM,EAAE,cAAc,QAAQ,QAAQ,gBAAgB,WAAAM,YAAW,QAAQ,OAAO,IAAI;AACpF,QAAM,CAAC,QAAQ,SAAS,QAAI,yBAAS,KAAK;AAC1C,QAAM,CAAC,aAAa,cAAc,QAAI,yBAAS,MAAM;AACrD,QAAM,iBAAa,uBAAe;AAClC,QAAM,iBAAiB,YAAY,MAAM;AACzC,QAAM,iBAAiB,cAAc,oBAAoB;AACzD,QAAM,WAAW,WAAW,gBAAgB,gBAAgB;AAE5D,gCAAU,MAAM;AACd,QAAI,mBAAmB,UAAU,WAAW,aAAa;AACvD,qBAAe,MAAM;AAAA,IACvB;AAAA,EACF,GAAG,CAAC,gBAAgB,QAAQ,WAAW,CAAC;AAExC,QAAM,4BAAwB,4BAAY,MAAM;AAC9C,cAAU,OAAK,CAAC,CAAC;AAAA,EACnB,GAAG,CAAC,CAAC;AAEL,QAAM,qBAAqB,CAAC,EAAE,GAAG,EAAE,MAA2B;AAC5D,UAAM,QAAQ,WAAW,IAAI;AAC7B,UAAM,gBAAgB,KAAK,MAAM,KAAK,IAAI;AAE1C,iBAAa,WAAW,OAAO;AAG7B,IAAAA,WAAU,aAAa;AAGzB,mBAAe,aAAa;AAAA,EAC9B;AAEA,QAAM,iBAAiB,MAAM;AAC3B,eAAW,MAAM;AACf,gBAAU,KAAK;AAAA,IACjB,GAAG,GAAG;AAAA,EACR;AAEA,MAAI,OAAO,+BAAAN,QAAA,cAAC,gBAAW;AAEvB,MAAI,WAAW,GAAG;AAChB,WAAO,+BAAAA,QAAA,cAAC,gBAAW;AAAA,EACrB,WAAW,UAAU,KAAK;AACxB,WAAO,+BAAAA,QAAA,cAAC,eAAU;AAAA,EACpB,WAAW,UAAU,KAAK;AACxB,WAAO,+BAAAA,QAAA,cAACK,aAAA,IAAU;AAAA,EACpB;AAEA,MAAI,UAAU;AACZ,WACE,+BAAAL,QAAA,cAAC,iBAAc,uBAAoB,UAAS,cAAY,QAAQ,OAAO,EAAE,GAAG,OAAO,MAAM,KACvF,+BAAAA,QAAA,cAAC,cAAM,IAAK,GACZ,+BAAAA,QAAA,cAAC,aACC,+BAAAA,QAAA;AAAA,MAAC,2BAAAE;AAAA,MAAA;AAAA,QACC,MAAK;AAAA,QACL,WAAU;AAAA,QACV,uBAAoB;AAAA,QACpB,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,QAAQ;AAAA,UACN,SAAS;AAAA,YACP,aAAa;AAAA,YACb,mBAAmB,OAAO;AAAA,YAC1B,YAAY,OAAO;AAAA,YACnB,QAAQ,OAAO;AAAA,YACf,SAAS;AAAA,YACT,YAAY,OAAO;AAAA,YACnB,mBAAmB,OAAO;AAAA,YAC1B,YAAY,OAAO;AAAA,UACrB;AAAA,QACF;AAAA,QACA,GAAG,SAAS;AAAA,QACZ,MAAM;AAAA,QACN,MAAM;AAAA;AAAA,IACR,CACF,CACF;AAAA,EAEJ;AAEA,SACE,+BAAAF,QAAA,cAAC,wBAAa,UAAU,QAAQ,SAAS,yBACvC,+BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,uBAAoB;AAAA,MACpB,cAAY;AAAA,MACZ,OAAO,EAAE,GAAG,OAAO,OAAO,QAAQ,GAAG,eAAe;AAAA;AAAA,IAEnD,UACC,+BAAAA,QAAA,cAAC,aACC,+BAAAA,QAAA;AAAA,MAAC,2BAAAE;AAAA,MAAA;AAAA,QACC,MAAK;AAAA,QACL,WAAU;AAAA,QACV,uBAAoB;AAAA,QACpB,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,QAAQ;AAAA,UACN,SAAS;AAAA,YACP,SAAS;AAAA,YACT,YAAY;AAAA,YACZ,aAAa;AAAA,YACb,mBAAmB;AAAA,YACnB,YAAY;AAAA,YACZ,WAAW;AAAA,YACX,YAAY;AAAA,YACZ,OAAO;AAAA,UACT;AAAA,QACF;AAAA,QACA,GAAG,SAAS;AAAA,QACZ,MAAM;AAAA,QACN,MAAM;AAAA;AAAA,IACR,GACA,+BAAAF,QAAA,cAAC,YAAK,CACR;AAAA,IAEF,+BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,cAAY,OAAO;AAAA,QACnB,SAAS;AAAA,QACT,OAAO,OAAO;AAAA,QACd,MAAK;AAAA;AAAA,MAEJ;AAAA,IACH;AAAA,EACF,CACF;AAEJ;;;AKtPA,IAAAR,iBAA4B;AAK5B,IAAM,gBAAgB,OAAO,KAAK;AAAA,EAChC;AAAA,IACE,YAAY;AAAA,IACZ,SAAS;AAAA,IACT,eAAe;AAAA,IACf,UAAU;AAAA,IACV,gBAAgB;AAAA,IAChB,UAAU;AAAA,IAEV,OAAO;AAAA,MACL,OAAO;AAAA,IACT;AAAA,EACF;AAAA,EACA,CAAC,EAAE,MAAM,MAAmB;AAC1B,QAAI,SAAwB,CAAC;AAE7B,QAAI,MAAM,WAAW,cAAc;AACjC,eAAS;AAAA,QAIP,6BAA6B;AAAA,UAC3B,eAAe;AAAA,UACf,SAAS,KAAK,GAAG,CAAC;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,MACL,GAAG;AAAA,IACL;AAAA,EACF;AAAA,EACA;AACF;AAEA,SAASS,SAAQ;AAAA,EAAE;AAAA,EAAU;AAAA;AAE1B,GAAoB;AACrB,SACE,+BAAAD,QAAA,cAAC,iBAAc,uBAAoB,WAAU,OAAO,CAAC,KAClD,QACH;AAEJ;AAEA,IAAO,sBAAQ,qBAAKC,QAAO;;;AClDpB,IAAM,aAAa;AAAA,EACxB,SAAS;AAAA,EACT,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,UAAU;AAAA,EACV,QAAQ;AACV;AAEO,IAAM,SAAS;AAAA,EACpB,OAAO;AAAA,EACP,MAAM;AAAA,EACN,cAAc;AAAA,EACd,OAAO;AAAA,EACP,SAAS;AAAA,EACT,aAAa;AACf;AAEO,IAAM,OAAO;AAAA,EAClB,QAAQ;AAAA,EACR,UAAU;AAAA,EACV,QAAQ;AAAA,EACR,UAAU;AAAA,EACV,QAAQ;AAAA,EACR,OAAO;AACT;;;A3ByBA,IAAM,mBAAN,cAA+B,6BAA4B;AAAA,EA6DzD,YAAY,OAAc;AACxB,UAAM,KAAK;AA7Db,wBAAQ,aAAY;AACpB,wBAAQ,cAAa;AAAA,MACnB,SAAS,CAAC;AAAA,MACV,YAAY;AAAA,MACZ,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,MAAM;AAAA,MACN,KAAK;AAAA,IACP;AAEA,wBAAQ;AACR,wBAAQ;AACR,wBAAQ;AACR,wBAAQ;AACR,wBAAQ,WAAM,0BAA0B;AACxC,wBAAQ,uBAAsB;AAC9B,wBAAQ;AACR,wBAAQ,sBAAqB;AAC7B,wBAAQ;AACR,wBAAQ;AAGR;AAAA,wBAAQ,sBAAiB,mBAAAM,SAAQ,CAAC,SAAsB;AACtD,YAAM,cAA2B;AAAA,QAC/B,aAAa;AAAA,QACb,MAAM;AAAA,MACR;AAGA,UAAI,MAAM;AACR,cAAM,MAAM,MAAM,QAAQ,IAAI,IAAI,OAAO,CAAC,IAAI;AAE9C,YAAI,CAAC,IAAI,MAAM,OAAK,YAAY,CAAC,CAAC,GAAG;AAEnC,kBAAQ,MAAM,aAAa;AAE3B,iBAAO;AAAA,QACT;AAEA,YAAI,IAAI,KAAK,OAAK,kBAAkB,CAAC,MAAM,OAAO,GAAG;AACnD,cAAI,CAAC,IAAI,MAAM,OAAK,kBAAkB,CAAC,MAAM,OAAO,GAAG;AAErD,oBAAQ,KAAK,4CAA4C;AAAA,UAC3D;AAEA,sBAAY,OAAO,IAAI,OAAO,OAAK,YAAY,CAAC,KAAK,kBAAkB,CAAC,MAAM,OAAO;AAAA,QACvF,OAAO;AACL,cAAI,IAAI,SAAS,GAAG;AAElB,oBAAQ,KAAK,kEAAkE;AAAA,UACjF;AAGA,sBAAY,cAAc,IAAI,CAAC;AAAA,QACjC;AAAA,MACF;AAEA,aAAO;AAAA,IACT,CAAC;AA2MD,wBAAQ,qBAAoB,OAAO,aAAqB;AACtD,YAAM,EAAE,MAAM,IAAI,KAAK;AACvB,YAAM,EAAE,SAAS,IAAI,KAAK;AAC1B,UAAI,WAAW;AAEf,UAAI;AACF,cAAM,aAAa,WAAW;AAE9B,YAAI,eAAe,CAAC;AAEpB,YAAI,KAAK,kBAAkB;AACzB,qBAAW,KAAK,MAAM,MAAM,aAAa,UAAU;AAEnD,gBAAM,KAAK,KAAK,OAAO,QAAQ;AAE/B,yBAAe;AAAA,YACb;AAAA,YACA,YAAY;AAAA,UACd;AAAA,QACF,WAAW,KAAK,QAAQ;AACtB,gBAAM,QAAQ,MAAM,KAAK,OAAO,gBAAgB;AAEhD,cAAI,OAAO;AACT,uBAAW,KAAK,MAAM,MAAM,aAAa,cAAc,cAAc,UAAU;AAC/E,kBAAM,KAAK,OAAO,KAAK,QAAQ;AAE/B,2BAAe;AAAA,cACb;AAAA,cACA,YAAY;AAAA,YACd;AAAA,UACF,OAAO;AACL,2BAAe,EAAE,UAAU,EAAE;AAAA,UAC/B;AAAA,QACF;AAEA,aAAK,YAAY,YAAY;AAE7B,YAAI,UAAU;AACZ,mBAAS;AAAA,YACP,GAAG,KAAK;AAAA,YACR,GAAG;AAAA,YACH,MAAM,KAAK;AAAA,UACb,CAAC;AAAA,QACH;AAAA,MACF,SAAS,OAAP;AAEA,gBAAQ,MAAM,KAAK;AAAA,MACrB;AAAA,IACF;AA+CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAQ,qBAAoB,OAAO,aAAqB;AACtD,YAAM,EAAE,cAAc,IAAI,KAAK;AAC/B,YAAM,EAAE,UAAU,uBAAuB,IAAI,KAAK;AAElD,WAAK,YAAY,EAAE,iBAAiB,SAAS,CAAC;AAE9C,UAAI;AACF,cAAM,UAAU,KAAK,OAAO,QAAQ;AAGpC,YAAI,wBAAwB;AAC1B,yBAAe,QAAQ,gBAAgB,QAAQ;AAAA,QACjD;AAGA,YAAI,eAAe;AACjB,gBAAM,KAAK,WAAW;AAEtB,gBAAM,SAA8B,MAAM,iBAAiB,KAAK,KAAK;AAErE,cAAI,UAAU,CAAC,OAAO,cAAc,UAAU;AAC5C,kBAAM,KAAK,WAAW,IAAI;AAAA,UAC5B;AAAA,QACF;AAAA,MACF,SAAS,OAAP;AAEA,gBAAQ,MAAM,KAAK;AAAA,MACrB;AAAA,IACF;AAEA,wBAAQ,8BAA6B,CAAC,WAAoB;AACxD,YAAM,EAAE,QAAQ,IAAI,KAAK;AAEzB,WAAK,YAAY,EAAE,SAAS,OAAO,CAAC;AAGpC,UAAI,YAAY,QAAQ;AACtB,aAAK,eAAe;AAAA,UAClB,GAAG,KAAK;AAAA,UACR,SAAS;AAAA,UACT,MAAM,KAAK;AAAA,QACb,CAAC;AAAA,MACH;AAAA,IACF;AAEA,wBAAQ,sBAAqB,OAAO,MAAiB,YAAoB;AACvE,YAAM,EAAE,OAAO,IAAI,KAAK;AACxB,YAAM,kBAAkB,SAAS,WAAW;AAC5C,YAAM,wBAAwB,SAAS,WAAW;AAElD,UAAI,aAAa;AACjB,UAAI,UAA2B,CAAC;AAEhC,UAAI,KAAK,UAAU,CAAC,iBAAiB;AACnC,aAAK,OAAO,WAAW;AACvB,aAAK,SAAS;AAAA,MAChB;AAEA,UAAI,uBAAuB;AACzB,qBAAa,OAAO;AAEpB,SAAC,EAAE,UAAU,CAAC,EAAE,IAAI,MAAM,WAAW,KAAK,KAAK;AAAA,MACjD,WAAW,CAAC,iBAAiB;AAC3B,qBAAa,OAAO;AAAA,MACtB;AAEA,WAAK,YAAY;AAAA,QACf;AAAA,QACA,OAAO;AAAA,QACP,WAAW;AAAA,QACX,gBAAgB;AAAA,QAChB,eAAe;AAAA,QACf,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAEA,wBAAQ,4BAA2B,OAAO,UAAiC;AACzE,UAAI;AAEF,YAAI,OAAO;AACT,gBAAM;AAAA,YACJ;AAAA,YACA;AAAA,YACA,cAAc,EAAE,eAAe,aAAa,gBAAgB;AAAA,UAC9D,IAAI;AAEJ,gBAAM,YAAY,CAAC;AACnB,gBAAM,SAAU,MAAM,KAAK,QAAQ,UAAU,KAAM;AACnD,cAAI,aAAa,CAAC;AAElB,cAAI,aAAa,KAAK,eAAe;AACnC,yBAAa;AAAA,cACX,YAAY,YAAY,IAAI,YAAY;AAAA,cACxC,UAAU;AAAA,cACV,gBAAgB,gBAAgB,IAAI,YAAY;AAAA,cAChD,OAAO,aAAa,aAAa;AAAA,YACnC;AAAA,UACF;AAEA,eAAK,YAAY;AAAA,YACf,OAAO;AAAA,YACP,WAAW;AAAA,YACX,UAAU;AAAA,YACV;AAAA,YACA,YAAY;AAAA,YACZ,QAAQ,MAAM,MAAM;AAAA,YACpB,GAAG;AAAA,UACL,CAAC;AAAA,QACH,WAAW,KAAK,kBAAkB;AAChC,gBAAM,KAAK,WAAW;AAAA,QACxB,OAAO;AACL,eAAK,YAAY;AAAA,YACf,UAAU;AAAA,YACV,WAAW;AAAA,YACX,YAAY,CAAC;AAAA,YACb,UAAU;AAAA,YACV,gBAAgB,CAAC;AAAA,YACjB,OAAO;AAAA,cACL,SAAS,CAAC;AAAA,cACV,YAAY;AAAA,cACZ,IAAI;AAAA,cACJ,OAAO;AAAA,cACP,MAAM;AAAA,cACN,KAAK;AAAA,YACP;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF,SAAS,OAAP;AAEA,gBAAQ,MAAM,KAAK;AAAA,MACrB;AAAA,IACF;AAEA,wBAAQ,sBAAqB,OAAO,EAAE,UAAU,MAAmC;AACjF,YAAM,EAAE,iBAAiB,QAAQ,IAAI,MAAM,KAAK,kBAAkB,SAAS;AAE3E,WAAK,YAAY;AAAA,QACf;AAAA,QACA,UAAU;AAAA,QACV;AAAA,QACA,gBAAgB;AAAA,QAChB,QAAQ,YAAY,OAAO,QAAQ,OAAO;AAAA,MAC5C,CAAC;AAAA,IACH;AAEA,wBAAQ,gBAAe,MAAM;AAC3B,YAAM,EAAE,SAAS,aAAa,IAAI,KAAK;AAEvC,mBAAa,KAAK,aAAa;AAE/B,WAAK,gBAAgB,OAAO,WAAW,MAAM;AAC3C,aAAK,sBAAsB,OAAO,cAAc,OAAO,WAAW;AAClE,aAAK,YAAY;AAAA,MACnB,GAAG,GAAG;AAAA,IACR;AAEA,wBAAQ,uBAAsB,MAAM;AAClC,YAAM,EAAE,qBAAqB,IAAI,KAAK;AAEtC,UAAI,sBAAsB;AACxB,aAAK,YAAY,mBAAiB;AAChC,iBAAO,EAAE,aAAa,CAAC,cAAc,YAAY;AAAA,QACnD,CAAC;AAAA,MACH;AAAA,IACF;AA2BA,wBAAQ,oBAAmB,MAAM;AAC/B,YAAM,EAAE,OAAO,IAAI,KAAK;AACxB,YAAM;AAAA,QACJ,gBAAgB,CAAC,aAAoC;AACnD,mBAAS,KAAK,KAAK;AAAA,QACrB;AAAA,QACA,OAAO;AAAA,MACT,IAAI,KAAK;AAET,UAAI,CAAC,OAAO,SAAS;AACnB;AAAA,MACF;AAEA,WAAK,YAAY;AAAA,QACf,OAAO;AAAA,QACP,WAAW;AAAA,QACX,gBAAgB;AAAA,MAClB,CAAC;AAED,WAAK,SAAS,IAAI,OAAO,QAAQ,OAAO;AAAA,QACtC;AAAA,QACA;AAAA,QACA;AAAA,MACF,CAAC;AAED,WAAK,OAAO,YAAY,SAAS,KAAK,kBAAkB;AACxD,WAAK,OAAO,YAAY,aAAa,KAAK,kBAAkB;AAC5D,WAAK,OAAO,YAAY,wBAAwB,KAAK,wBAAwB;AAC7E,WAAK,OAAO;AAAA,QAAY;AAAA,QAAwB,WAC9C,KAAK,mBAAmB,WAAW,gBAAgB,MAAM,OAAO;AAAA,MAClE;AACA,WAAK,OAAO;AAAA,QAAY;AAAA,QAAwB,WAC9C,KAAK,mBAAmB,WAAW,gBAAgB,MAAM,OAAO;AAAA,MAClE;AACA,WAAK,OAAO;AAAA,QAAY;AAAA,QAAiB,WACvC,KAAK,mBAAmB,WAAW,SAAS,MAAM,OAAO;AAAA,MAC3D;AACA,WAAK,OAAO;AAAA,QAAY;AAAA,QAAkB,WACxC,KAAK,mBAAmB,WAAW,UAAU,MAAM,OAAO;AAAA,MAC5D;AACA,WAAK,OAAO,YAAY,mBAAmB,YAAY;AAErD,gBAAQ,IAAI,uDAAuD;AAAA,MACrE,CAAC;AAED,WAAK,OAAO,QAAQ;AAAA,IACtB;AAQA,wBAAQ,qBAAoB,CAAC,OAAe;AAC1C,WAAK,YAAY,EAAE,iBAAiB,IAAI,WAAW,KAAK,CAAC;AAAA,IAC3D;AAEA,wBAAQ,aAAY,OAAO,WAAmB;AAK5C,UAAI,KAAK,kBAAkB;AACzB,cAAM,UAAU,KAAK,OAAO,KAAK,MAAM,SAAS,GAAG,CAAC;AACpD,cAAM,KAAK,WAAW;AAAA,MACxB,WAAW,KAAK,QAAQ;AACtB,cAAM,KAAK,OAAO,UAAU,MAAM;AAAA,MACpC;AAEA,WAAK,YAAY,EAAE,OAAO,CAAC;AAAA,IAC7B;AAEA,wBAAQ,cAAa,YAAY;AAC/B,UAAI,CAAC,KAAK,WAAW;AACnB;AAAA,MACF;AAEA,YAAM,EAAE,SAAS,IAAI,KAAK;AAE1B,UAAI;AACF,cAAM,SAA8B,MAAM,iBAAiB,KAAK,KAAK;AACrE,YAAI,QAAQ,KAAK;AAEjB,YAAI,CAAC,QAAQ;AACX,gBAAM,IAAI,MAAM,WAAW;AAAA,QAC7B;AAGA,YAAI,OAAO,MAAM;AACf,kBAAQ;AAAA,YACN,SAAS,OAAO,KAAK;AAAA,YACrB,YAAY,OAAO,KAAK;AAAA,YACxB,IAAI,OAAO,KAAK;AAAA,YAChB,OAAO,cAAc,OAAO,KAAK,KAAK;AAAA,YACtC,MAAM,OAAO,KAAK;AAAA,YAClB,KAAK,OAAO,KAAK;AAAA,UACnB;AAAA,QACF;AAEA,aAAK,YAAY;AAAA,UACf,OAAO;AAAA,UACP,WAAW;AAAA,UACX,UAAU;AAAA,UACV,WAAW,OAAO;AAAA,UAClB,YAAY,CAAC;AAAA,UACb,gBAAgB,CAAC;AAAA,UACjB,YAAY,OAAO,OAAO,OAAO,cAAc;AAAA,UAC/C,QAAQ,OAAO;AAAA,UACf;AAAA,UACA,QAAQ,YAAY,OAAO,OAAO,cAAc;AAAA,QAClD,CAAC;AAAA,MACH,SAAS,OAAP;AACA,cAAM,QAAQ;AAAA,UACZ,UAAU;AAAA,UACV,WAAW;AAAA,UACX,UAAU;AAAA,UACV,OAAO,KAAK;AAAA,QACd;AAEA,YAAI,UAAU;AACZ,eAAK,YAAY;AAAA,YACf,iBAAiB;AAAA,YACjB,GAAG;AAAA,UACL,CAAC;AAED;AAAA,QACF;AAEA,aAAK,YAAY;AAAA,UACf,OAAO,MAAM;AAAA,UACb,WAAW,WAAW;AAAA,UACtB,QAAQ,OAAO;AAAA,UACf,GAAG;AAAA,QACL,CAAC;AAAA,MACH;AAAA,IACF;AA4CA,wBAAQ,gBAAe,YAAY;AACjC,YAAM,EAAE,gBAAgB,IAAI,KAAK;AACjC,YAAM,EAAE,QAAQ,KAAK,IAAI,KAAK;AAE9B,UAAI,OAAO,WAAW,YAAY,MAAM,QAAQ,IAAI,GAAG;AACrD,cAAM,KAAK,KAAK,OAAO,EAAE,UAAU,iBAAiB,QAAQ,KAAK,CAAC;AAAA,MACpE;AAAA,IACF;AAEA,wBAAQ,cAAa,OAAO,QAAQ,UAAU;AAC5C,YAAM,EAAE,iBAAiB,WAAW,YAAY,IAAI,KAAK;AACzD,YAAM,EAAE,QAAQ,KAAK,IAAI,KAAK;AAC9B,YAAM,mBAAmB,SAAS;AAClC,YAAM,cAAc,KAAK,eAAe,IAAI;AAE5C,UAAI;AAEF,YAAI,KAAK,kBAAkB;AACzB,cAAI,CAAC,WAAW;AACd,kBAAM,KAAK,KAAK,OAAO;AAAA,cACrB,UAAU;AAAA,cACV;AAAA,cACA,GAAI,mBAAmB,cAAc;AAAA,YACvC,CAAC;AAAA,UACH,OAAO;AACL,kBAAM,MAAM,KAAK,KAAK;AAEtB,iBAAK,YAAY,EAAE,WAAW,MAAM,CAAC;AAAA,UACvC;AAEA,eAAK,cAAc,OAAO,WAAW,MAAM;AACzC,iBAAK,WAAW;AAAA,UAClB,GAAG,GAAG;AAAA,QACR,WAAW,KAAK,QAAQ;AACtB,gBAAM,KAAK,OAAO,gBAAgB;AAElC,gBAAM,cAAc,MAAM,KAAK,OAAO,gBAAgB;AACtD,gBAAM,aAAa,CAAC,eAAe,CAAC,EAAE,YAAY,eAAe,YAAY;AAG7E,cAAI,cAAc,kBAAkB;AAClC,kBAAM,KAAK,KAAK,OAAO;AAAA,cACrB,UAAU;AAAA,cACV;AAAA,cACA,GAAI,mBAAmB,cAAc;AAAA,YACvC,CAAC;AACD,kBAAM,KAAK,OAAO,WAAW;AAAA,UAC/B,OAAO;AACL,kBAAM,KAAK,OAAO,WAAW;AAAA,UAC/B;AAAA,QACF;AAEA,YAAI,aAAa;AACf,eAAK,YAAY,EAAE,aAAa,MAAM,CAAC;AAAA,QACzC;AAAA,MACF,SAAS,OAAP;AAEA,gBAAQ,MAAM,KAAK;AAAA,MACrB;AAAA,IACF;AAEA,wBAAQ,iBAAgB,YAAY;AAClC,UAAI,CAAC,KAAK,WAAW;AACnB;AAAA,MACF;AAEA,YAAM,EAAE,YAAY,MAAM,IAAI,KAAK;AAEnC,UAAI;AAEF,YAAI,KAAK,kBAAkB;AACzB,cAAI,WAAW,aAAa,MAAM;AAElC,qBAAW,SAAS,OAAO,SAAS,QAAQ,IAAI,WAAW,KAAK,KAAK,QAAQ,CAAC,CAAC;AAE/E,eAAK,YAAY;AAAA,YACf;AAAA,YACA,YAAY,aAAa,KAAK;AAAA,UAChC,CAAC;AAAA,QACH,WAAW,KAAK,QAAQ;AACtB,gBAAM,QAAQ,MAAM,KAAK,OAAO,gBAAgB;AAGhD,cAAI,OAAO;AACT,kBAAM,WAAW,MAAM;AACvB,kBAAM,WAAW;AAAA,eACb,WAAW,MAAM,aAAa,cAAc,cAAe,KAAK,QAAQ,CAAC;AAAA,YAC7E;AAEA,iBAAK,YAAY;AAAA,cACf;AAAA,cACA,YAAY,WAAW,KAAK;AAAA,YAC9B,CAAC;AAAA,UACH;AAAA,QACF;AAAA,MACF,SAAS,OAAP;AAEA,gBAAQ,MAAM,KAAK;AAAA,MACrB;AAAA,IACF;AAEA,wBAAQ,eAAoC,WAAS;AACnD,UAAI,CAAC,KAAK,WAAW;AACnB;AAAA,MACF;AAEA,WAAK,SAAS,KAAK;AAAA,IACrB;AAnwBE,SAAK,QAAQ;AAAA,MACX,iBAAiB;AAAA,MACjB,UAAU;AAAA,MACV,SAAS,CAAC;AAAA,MACV,OAAO;AAAA,MACP,WAAW;AAAA,MACX,UAAU;AAAA,MACV,gBAAgB;AAAA,MAChB,aAAa;AAAA,MACb,WAAW;AAAA,MACX,SAAS;AAAA,MACT,eAAe;AAAA,MACf,aAAa;AAAA,MACb,YAAY,CAAC;AAAA,MACb,gBAAgB;AAAA,MAChB,UAAU;AAAA,MACV,gBAAgB,CAAC;AAAA,MACjB,YAAY;AAAA,MACZ,QAAQ,OAAO;AAAA,MACf,OAAO,KAAK;AAAA,MACZ,QAAQ,YAAY,MAAM,aAAa,KAAK;AAAA,IAC9C;AAEA,SAAK,SAAS,UAAU,MAAM,MAAM;AAEpC,SAAK,SAAS,gBAAgB,MAAM,MAAM;AAAA,EAC5C;AAAA,EAcA,MAAa,oBAAoB;AAC/B,SAAK,YAAY;AACjB,UAAM,EAAE,MAAM,EAAE,IAAI,KAAK,IAAI,SAAS,sBAAsB,KAAK,CAAC;AAElE,SAAK,YAAY;AAAA,MACf,gBAAgB,MAAM,OAAO,cAAc,IAAI,WAAW;AAAA,MAC1D,QAAQ,OAAO;AAAA,IACjB,CAAC;AAED,QAAI,CAAC,OAAO,8BAA8B;AACxC,aAAO,+BAA+B,KAAK;AAAA,IAC7C,OAAO;AACL,WAAK,iBAAiB;AAAA,IACxB;AAEA,UAAM,kBAAkB;AAExB,WAAO,iBAAiB,UAAU,KAAK,YAAY;AACnD,SAAK,aAAa;AAAA,EACpB;AAAA,EAEA,MAAa,mBAAmB,eAAsB,eAAsB;AAC1E,UAAM,EAAE,iBAAiB,UAAU,gBAAgB,WAAW,QAAQ,MAAM,IAAI,KAAK;AACrF,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,MAAM;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,IAAI,KAAK;AACT,UAAM,UAAU,cAAc,WAAW,OAAO,SAAS,WAAW,OAAO;AAC3E,UAAM,gBAAgB,KAAC,kBAAAC,SAAQ,cAAc,QAAQ,MAAM;AAC3D,UAAM,gBAAgB,KAAC,kBAAAA,SAAQ,cAAc,QAAQ,MAAM;AAC3D,UAAM,gBAAgB,KAAC,kBAAAA,SAAQ,cAAc,QAAQ,MAAM;AAC3D,UAAM,cAAc,KAAC,kBAAAA,SAAQ,cAAc,MAAM,IAAI;AACrD,UAAM,cAAc,KAAK,eAAe,IAAI;AAE5C,UAAM,UAAU,CAAC,CAAC,mBAAmB,CAAC,EAAE,YAAY,eAAe,YAAY;AAC/E,UAAM,aAAa,YAAY,YAAY;AAE3C,QAAI,WAAW,YAAY;AACzB,YAAM,KAAK,WAAW,IAAI;AAG1B,UAAI,CAAC,WAAW;AACd,aAAK,YAAY,EAAE,WAAW,KAAK,CAAC;AAAA,MACtC;AAEA,UAAI,KAAK,kBAAkB;AACzB,aAAK,cAAc,OAAO,WAAW,MAAM;AACzC,eAAK,WAAW;AAAA,QAClB,GAAG,GAAG;AAAA,MACR;AAAA,IACF,WAAW,aAAa;AACtB,UAAI,aAAa,UAAU;AACzB,cAAM,KAAK,WAAW,IAAI;AAAA,MAC5B,OAAO;AACL,aAAK,YAAY,EAAE,aAAa,KAAK,CAAC;AAAA,MACxC;AAAA,IACF,WAAW,cAAc,SAAS,YAAY,aAAa,WAAW;AACpE,YAAM,KAAK,WAAW,CAAC,MAAM,EAAE;AAAA,IACjC;AAEA,QAAI,cAAc,WAAW,QAAQ;AACnC,WAAK,eAAe;AAAA,QAClB,GAAG,KAAK;AAAA,QACR,MAAM,KAAK;AAAA,MACb,CAAC;AAAA,IACH;AAEA,QAAI,cAAc,oBAAoB,mBAAmB,iBAAiB;AACxE,UAAI,CAAC,SAAS;AACZ,aAAK,eAAe;AAAA,UAClB,GAAG,KAAK;AAAA,UACR,MAAM,KAAK;AAAA,QACb,CAAC;AAAA,MACH;AAEA,YAAM,KAAK,mBAAmB,KAAK,gBAAgB;AACnD,YAAM,KAAK,cAAc;AAAA,IAC3B;AAEA,QAAI,cAAc,MAAM,OAAO,MAAM,MAAM,MAAM,IAAI;AACnD,WAAK,eAAe;AAAA,QAClB,GAAG,KAAK;AAAA,QACR,MAAM,KAAK;AAAA,MACb,CAAC;AAED,UAAI,cAAc;AAChB,aAAK,YAAY,EAAE,SAAS,MAAM,CAAC;AAAA,MACrC;AAAA,IACF;AAEA,QAAI,cAAc,cAAc,WAAW;AACzC,WAAK,kBAAkB;AACvB,YAAM,KAAK,mBAAmB,KAAK,gBAAgB;AAEnD,WAAK,eAAe;AAAA,QAClB,GAAG,KAAK;AAAA,QACR,MAAM,KAAK;AAAA,MACb,CAAC;AAAA,IACH;AAEA,QAAI,cAAc,WAAW,QAAQ;AACnC,YAAM,KAAK,aAAa;AAAA,IAC1B;AAEA,QAAI,cAAc,kBAAkB,CAAC,gBAAgB;AACnD,UAAI,sBAAsB,CAAC,MAAM;AAC/B,cAAM,SAA8B,MAAM,iBAAiB,KAAK,KAAK;AAGrE,YAAI,UAAU,OAAO,cAAc,OAAO,OAAO,OAAO,UAAU;AAChE,eAAK,kBAAkB,OAAO,OAAO,EAAE;AAAA,QACzC;AAAA,MACF;AAAA,IACF;AAEA,QAAI,eAAe;AACjB,WAAK,aAAa;AAAA,IACpB;AAEA,QAAI,eAAe;AACjB,WAAK,SAAS,UAAU,MAAM;AAAA,IAChC;AAEA,QAAI,eAAe;AACjB,WAAK,SAAS,gBAAgB,MAAM;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAa,uBAAuB;AAClC,SAAK,YAAY;AAGjB,QAAI,KAAK,QAAQ;AACf,WAAK,OAAO,WAAW;AAAA,IACzB;AAEA,kBAAc,KAAK,kBAAkB;AACrC,kBAAc,KAAK,sBAAsB;AACzC,iBAAa,KAAK,WAAW;AAE7B,WAAO,oBAAoB,UAAU,KAAK,YAAY;AAAA,EACxD;AAAA,EAEQ,eAAe,OAA4B;AACjD,UAAM,EAAE,SAAS,IAAI,KAAK;AAE1B,QAAI,UAAU;AACZ,eAAS,KAAK;AAAA,IAChB;AAAA,EACF;AAAA,EAuQA,IAAY,QAAgB;AAC1B,UAAM,EAAE,MAAM,IAAI,KAAK;AAEvB,WAAO;AAAA,EACT;AAAA,EAEA,MAAc,kBAAkB,IAAY;AAC1C,UAAM,EAAE,uBAAuB,IAAI,KAAK;AACxC,UAAM,EAAE,QAAQ,IAAI,MAAM,WAAW,KAAK,KAAK;AAC/C,QAAI,kBAAkB;AAEtB,QAAI,wBAAwB;AAC1B,YAAM,gBAAgB,eAAe,QAAQ,cAAc;AAG3D,UAAI,CAAC,iBAAiB,CAAC,QAAQ,KAAK,CAAC,MAAqB,EAAE,OAAO,aAAa,GAAG;AACjF,uBAAe,QAAQ,gBAAgB,eAAe;AAAA,MACxD,OAAO;AACL,0BAAkB;AAAA,MACpB;AAAA,IACF;AAEA,WAAO,EAAE,iBAAiB,QAAQ;AAAA,EACpC;AAAA,EAkDA,IAAY,mBAA4B;AACtC,UAAM,EAAE,iBAAiB,UAAU,OAAO,IAAI,KAAK;AAEnD,WAAQ,mBAAmB,oBAAoB,YAAa,WAAW,OAAO;AAAA,EAChF;AAAA,EAsFA,MAAc,mBAAmB,YAAqB;AACpD,UAAM,EAAE,2BAA2B,IAAI,KAAK;AAE5C,QAAI;AACF,UAAI,KAAK,oBAAoB,cAAc,CAAC,KAAK,oBAAoB;AACnE,cAAM,KAAK,WAAW;AAEtB,sBAAc,KAAK,kBAAkB;AACrC,aAAK,qBAAqB,OAAO;AAAA,UAC/B,KAAK;AAAA,UACL,6BAA8B;AAAA,QAChC;AAAA,MACF;AAEA,WAAK,CAAC,cAAc,CAAC,KAAK,qBAAqB,KAAK,oBAAoB;AACtE,sBAAc,KAAK,kBAAkB;AACrC,aAAK,qBAAqB;AAAA,MAC5B;AAAA,IACF,SAAS,OAAP;AAEA,cAAQ,MAAM,KAAK;AAAA,IACrB;AAAA,EACF;AAAA,EAEQ,oBAAoB;AAC1B,UAAM,EAAE,UAAU,IAAI,KAAK;AAG3B,QAAI,WAAW;AAEb,UAAI,CAAC,KAAK,wBAAwB;AAChC,aAAK,yBAAyB,OAAO;AAAA,UACnC,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,IACF,WAAW,KAAK,wBAAwB;AACtC,oBAAc,KAAK,sBAAsB;AACzC,WAAK,yBAAyB;AAAA,IAChC;AAAA,EACF;AAAA,EA+GO,SAAS;AACd,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,IAAI,KAAK;AACT,UAAM;AAAA,MACJ,kBAAkB;AAAA,MAClB,eAAe;AAAA,MACf,eAAe;AAAA,MACf,SAAS;AAAA,MACT;AAAA,MACA;AAAA,IACF,IAAI,KAAK;AACT,UAAM,UAAW,CAAC,OAAO,OAAO,OAAO,WAAW,EAAe,SAAS,MAAM;AAEhF,UAAM,SAAoC;AAAA,MACxC,MAAM,+BAAAR,QAAA,cAAC,UAAO,QAAQ,KAAK,QAAQ;AAAA,IACrC;AAEA,QAAI,SAAS;AAEX,UAAI,CAAC,OAAO,MAAM;AAChB,eAAO,OACL,+BAAAA,QAAA;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA,QAAQ,KAAK;AAAA,YACb,wBAAwB,KAAK;AAAA,YAC7B;AAAA,YACA,QAAQ,KAAK;AAAA,YACb,OAAO,KAAK;AAAA,YACZ;AAAA,YACA;AAAA;AAAA,QACF;AAAA,MAEJ;AAEA,aAAO,UACL,+BAAAA,QAAA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,eAAe,KAAK;AAAA,UACpB,MAAM,iBAAiB,CAAC;AAAA,UACxB;AAAA,UACA,QAAQ,KAAK;AAAA;AAAA,MACf;AAGF,aAAO,SAAS,kBACd,+BAAAA,QAAA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,QAAQ,KAAK;AAAA,UACb;AAAA,UACA,WAAW,KAAK;AAAA,UAChB,QAAQ,KAAK;AAAA,UACb;AAAA;AAAA,MACF,IACE;AAEJ,UAAI,KAAK,qBAAqB;AAC5B,eAAO,UACL,+BAAAA,QAAA,cAAC,mBAAQ,QAAgB,QAAQ,KAAK,UACnC,OAAO,SACP,OAAO,MACV;AAAA,MAEJ;AAEA,aAAO,WACL,+BAAAA,QAAA;AAAA,QAAC;AAAA;AAAA,UAEC,YAAY,MAAM;AAAA,UAElB;AAAA,UAKA,eAAe,KAAK;AAAA,UAIpB,iBAAiB,KAAK;AAAA,UACtB;AAAA,UAEA;AAAA,UACA,QAAQ,KAAK;AAAA;AAAA,MAEf;AAGF,aAAO,OACL,+BAAAA,QAAA,cAAC,mBAAQ,QAAgB,QAAQ,KAAK,UAEnC,OAAO,QAEV;AAAA,IAEJ,WAAW,OAAO,MAAM;AACtB,aAAO,OAAO,OAAO;AAAA,IACvB;AAEA,QAAI,WAAW,OAAO,OAAO;AAC3B,aAAO,OAAO,+BAAAA,QAAA,cAAC,gBAAa,QAAQ,KAAK,UAAS,KAAM;AAAA,IAC1D;AAEA;AAAA;AAAA,MAEE,+BAAAA,QAAA,cAAC,aACE,OAAO,IACV;AAAA;AAAA,EAIJ;AACF;AAAA;AA/2BE,cA7FI,kBA6FG,gBAAe;AAAA,EACpB,UAAU;AAAA,EACV,eAAe;AAAA,EACf,sBAAsB;AAAA,EACtB,MAAM;AAAA,EACN,wBAAwB;AAAA,EACxB,cAAc;AAAA,EACd,4BAA4B;AAAA,EAC5B,oBAAoB;AACtB;AA22BF,IAAO,cAAQ","sourcesContent":["/* eslint-disable camelcase */\r\nimport React, { createRef, PureComponent, ReactNode } from 'react';\r\nimport isEqual from '@gilbarbara/deep-equal';\r\nimport memoize from 'memoize-one';\r\n\r\nimport Actions from './components/Actions';\r\nimport Controls from './components/Controls';\r\nimport Devices from './components/Devices';\r\nimport ErrorMessage from './components/ErrorMessage';\r\nimport Info from './components/Info';\r\nimport Loader from './components/Loader';\r\n// import Player from './components/Player';\r\nimport Volume from './components/Volume';\r\nimport Wrapper from './components/Wrapper';\r\nimport { ERROR_TYPE, STATUS, TYPE } from './constants';\r\nimport { getLocale, getMergedStyles, getSpotifyURIType } from './modules/getters';\r\nimport {\r\n  convertTrack,\r\n  getAlbumImage,\r\n  loadSpotifyPlayer,\r\n  parseVolume,\r\n  round,\r\n  validateURI,\r\n} from './modules/helpers';\r\nimport {\r\n  getDevices,\r\n  getPlaybackState,\r\n  // next,\r\n  pause,\r\n  play,\r\n  // previous,\r\n  seek,\r\n  setDevice,\r\n  setVolume} from './modules/spotify';\r\nimport {\r\n  CallbackState,\r\n  ErrorType,\r\n  Locale,\r\n  PlayOptions,\r\n  Props,\r\n  SpotifyArtist,\r\n  SpotifyDevice,\r\n  SpotifyPlayerCallback,\r\n  SpotifyPlayerStatus,\r\n  State,\r\n  Status,\r\n  StylesOptions,\r\n} from './types';\r\n\r\nclass SpotifyWebPlayer extends PureComponent<Props, State> {\r\n  private isMounted = false;\r\n  private emptyTrack = {\r\n    artists: [] as SpotifyArtist[],\r\n    durationMs: 0,\r\n    id: '',\r\n    image: '',\r\n    name: '',\r\n    uri: '',\r\n  };\r\n\r\n  private locale: Locale;\r\n  private player?: Spotify.Player;\r\n  private playerProgressInterval?: number;\r\n  private playerSyncInterval?: number;\r\n  private ref = createRef<HTMLDivElement>();\r\n  private renderInlineActions = false;\r\n  private resizeTimeout?: number;\r\n  private seekUpdateInterval = 100;\r\n  private styles: StylesOptions;\r\n  private syncTimeout?: number;\r\n\r\n  // eslint-disable-next-line unicorn/consistent-function-scoping\r\n  private getPlayOptions = memoize((data): PlayOptions => {\r\n    const playOptions: PlayOptions = {\r\n      context_uri: undefined,\r\n      uris: undefined,\r\n    };\r\n\r\n    /* istanbul ignore else */\r\n    if (data) {\r\n      const ids = Array.isArray(data) ? data : [data];\r\n\r\n      if (!ids.every(d => validateURI(d))) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('Invalid URI');\r\n\r\n        return playOptions;\r\n      }\r\n\r\n      if (ids.some(d => getSpotifyURIType(d) === 'track')) {\r\n        if (!ids.every(d => getSpotifyURIType(d) === 'track')) {\r\n          // eslint-disable-next-line no-console\r\n          console.warn(\"You can't mix tracks URIs with other types\");\r\n        }\r\n\r\n        playOptions.uris = ids.filter(d => validateURI(d) && getSpotifyURIType(d) === 'track');\r\n      } else {\r\n        if (ids.length > 1) {\r\n          // eslint-disable-next-line no-console\r\n          console.warn(\"Albums, Artists, Playlists and Podcasts can't have multiple URIs\");\r\n        }\r\n\r\n        // eslint-disable-next-line prefer-destructuring\r\n        playOptions.context_uri = ids[0];\r\n      }\r\n    }\r\n\r\n    return playOptions;\r\n  });\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      currentDeviceId: '',\r\n      deviceId: '',\r\n      devices: [],\r\n      error: '',\r\n      errorType: null,\r\n      isActive: false,\r\n      isInitializing: false,\r\n      isMagnified: false,\r\n      isPlaying: false,\r\n      isSaved: false,\r\n      isUnsupported: false,\r\n      needsUpdate: false,\r\n      nextTracks: [],\r\n      playerPosition: 'bottom',\r\n      position: 0,\r\n      previousTracks: [],\r\n      progressMs: 0,\r\n      status: STATUS.IDLE,\r\n      track: this.emptyTrack,\r\n      volume: parseVolume(props.initialVolume) || 1,\r\n    };\r\n\r\n    this.locale = getLocale(props.locale);\r\n\r\n    this.styles = getMergedStyles(props.styles);\r\n  }\r\n\r\n  // eslint-disable-next-line react/static-property-placement\r\n  static defaultProps = {\r\n    autoPlay: false,\r\n    initialVolume: 1,\r\n    magnifySliderOnHover: false,\r\n    name: 'Spotify Web Player',\r\n    persistDeviceSelection: false,\r\n    showSaveIcon: false,\r\n    syncExternalDeviceInterval: 5,\r\n    syncExternalDevice: false,\r\n  };\r\n\r\n  public async componentDidMount() {\r\n    this.isMounted = true;\r\n    const { top = 0 } = this.ref.current?.getBoundingClientRect() || {};\r\n\r\n    this.updateState({\r\n      playerPosition: top > window.innerHeight / 2 ? 'bottom' : 'top',\r\n      status: STATUS.INITIALIZING,\r\n    });\r\n\r\n    if (!window.onSpotifyWebPlaybackSDKReady) {\r\n      window.onSpotifyWebPlaybackSDKReady = this.initializePlayer;\r\n    } else {\r\n      this.initializePlayer();\r\n    }\r\n\r\n    await loadSpotifyPlayer();\r\n\r\n    window.addEventListener('resize', this.handleResize);\r\n    this.handleResize();\r\n  }\r\n\r\n  public async componentDidUpdate(previousProps: Props, previousState: State) {\r\n    const { currentDeviceId, deviceId, isInitializing, isPlaying, status, track } = this.state;\r\n    const {\r\n      autoPlay,\r\n      layout,\r\n      locale,\r\n      offset,\r\n      play: playProp,\r\n      showSaveIcon,\r\n      styles,\r\n      syncExternalDevice,\r\n      uris,\r\n    } = this.props;\r\n    const isReady = previousState.status !== STATUS.READY && status === STATUS.READY;\r\n    const changedLayout = !isEqual(previousProps.layout, layout);\r\n    const changedLocale = !isEqual(previousProps.locale, locale);\r\n    const changedStyles = !isEqual(previousProps.styles, styles);\r\n    const changedURIs = !isEqual(previousProps.uris, uris);\r\n    const playOptions = this.getPlayOptions(uris);\r\n\r\n    const canPlay = !!currentDeviceId && !!(playOptions.context_uri || playOptions.uris);\r\n    const shouldPlay = isReady && (autoPlay || playProp);\r\n\r\n    if (canPlay && shouldPlay) {\r\n      await this.togglePlay(true);\r\n\r\n      /* istanbul ignore else */\r\n      if (!isPlaying) {\r\n        this.updateState({ isPlaying: true });\r\n      }\r\n\r\n      if (this.isExternalPlayer) {\r\n        this.syncTimeout = window.setTimeout(() => {\r\n          this.syncDevice();\r\n        }, 600);\r\n      }\r\n    } else if (changedURIs) {\r\n      if (isPlaying || playProp) {\r\n        await this.togglePlay(true);\r\n      } else {\r\n        this.updateState({ needsUpdate: true });\r\n      }\r\n    } else if (previousProps.play !== playProp && playProp !== isPlaying) {\r\n      await this.togglePlay(!track.id);\r\n    }\r\n\r\n    if (previousState.status !== status) {\r\n      this.handleCallback({\r\n        ...this.state,\r\n        type: TYPE.STATUS,\r\n      });\r\n    }\r\n\r\n    if (previousState.currentDeviceId !== currentDeviceId && currentDeviceId) {\r\n      if (!isReady) {\r\n        this.handleCallback({\r\n          ...this.state,\r\n          type: TYPE.DEVICE,\r\n        });\r\n      }\r\n\r\n      await this.toggleSyncInterval(this.isExternalPlayer);\r\n      await this.updateSeekBar();\r\n    }\r\n\r\n    if (previousState.track.id !== track.id && track.id) {\r\n      this.handleCallback({\r\n        ...this.state,\r\n        type: TYPE.TRACK,\r\n      });\r\n\r\n      if (showSaveIcon) {\r\n        this.updateState({ isSaved: false });\r\n      }\r\n    }\r\n\r\n    if (previousState.isPlaying !== isPlaying) {\r\n      this.toggleProgressBar();\r\n      await this.toggleSyncInterval(this.isExternalPlayer);\r\n\r\n      this.handleCallback({\r\n        ...this.state,\r\n        type: TYPE.PLAYER,\r\n      });\r\n    }\r\n\r\n    if (previousProps.offset !== offset) {\r\n      await this.toggleOffset();\r\n    }\r\n\r\n    if (previousState.isInitializing && !isInitializing) {\r\n      if (syncExternalDevice && !uris) {\r\n        const player: SpotifyPlayerStatus = await getPlaybackState(this.token);\r\n\r\n        /* istanbul ignore else */\r\n        if (player && player.is_playing && player.device.id !== deviceId) {\r\n          this.setExternalDevice(player.device.id);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (changedLayout) {\r\n      this.handleResize();\r\n    }\r\n\r\n    if (changedLocale) {\r\n      this.locale = getLocale(locale);\r\n    }\r\n\r\n    if (changedStyles) {\r\n      this.styles = getMergedStyles(styles);\r\n    }\r\n  }\r\n\r\n  public async componentWillUnmount() {\r\n    this.isMounted = false;\r\n\r\n    /* istanbul ignore else */\r\n    if (this.player) {\r\n      this.player.disconnect();\r\n    }\r\n\r\n    clearInterval(this.playerSyncInterval);\r\n    clearInterval(this.playerProgressInterval);\r\n    clearTimeout(this.syncTimeout);\r\n\r\n    window.removeEventListener('resize', this.handleResize);\r\n  }\r\n\r\n  private handleCallback(state: CallbackState): void {\r\n    const { callback } = this.props;\r\n\r\n    if (callback) {\r\n      callback(state);\r\n    }\r\n  }\r\n\r\n  private handleChangeRange = async (position: number) => {\r\n    const { track } = this.state;\r\n    const { callback } = this.props;\r\n    let progress = 0;\r\n\r\n    try {\r\n      const percentage = position / 100;\r\n\r\n      let stateChanges = {};\r\n\r\n      if (this.isExternalPlayer) {\r\n        progress = Math.round(track.durationMs * percentage);\r\n\r\n        await seek(this.token, progress);\r\n\r\n        stateChanges = {\r\n          position,\r\n          progressMs: progress,\r\n        };\r\n      } else if (this.player) {\r\n        const state = await this.player.getCurrentState();\r\n\r\n        if (state) {\r\n          progress = Math.round(state.track_window.current_track.duration_ms * percentage);\r\n          await this.player.seek(progress);\r\n\r\n          stateChanges = {\r\n            position,\r\n            progressMs: progress,\r\n          };\r\n        } else {\r\n          stateChanges = { position: 0 };\r\n        }\r\n      }\r\n\r\n      this.updateState(stateChanges);\r\n\r\n      if (callback) {\r\n        callback({\r\n          ...this.state,\r\n          ...stateChanges,\r\n          type: TYPE.PROGRESS,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  // private handleClickTogglePlay = async () => {\r\n  //   const { isActive } = this.state;\r\n\r\n  //   try {\r\n  //     await this.togglePlay(!this.isExternalPlayer && !isActive);\r\n  //   } catch (error) {\r\n  //     // eslint-disable-next-line no-console\r\n  //     console.error(error);\r\n  //   }\r\n  // };\r\n\r\n  // private handleClickPrevious = async () => {\r\n  //   try {\r\n  //     /* istanbul ignore else */\r\n  //     if (this.isExternalPlayer) {\r\n  //       await previous(this.token);\r\n  //       this.syncTimeout = window.setTimeout(() => {\r\n  //         this.syncDevice();\r\n  //       }, 300);\r\n  //     } else if (this.player) {\r\n  //       await this.player.previousTrack();\r\n  //     }\r\n  //   } catch (error) {\r\n  //     // eslint-disable-next-line no-console\r\n  //     console.error(error);\r\n  //   }\r\n  // };\r\n\r\n  // private handleClickNext = async () => {\r\n  //   try {\r\n  //     /* istanbul ignore else */\r\n  //     if (this.isExternalPlayer) {\r\n  //       await next(this.token);\r\n  //       this.syncTimeout = window.setTimeout(() => {\r\n  //         this.syncDevice();\r\n  //       }, 300);\r\n  //     } else if (this.player) {\r\n  //       await this.player.nextTrack();\r\n  //     }\r\n  //   } catch (error) {\r\n  //     // eslint-disable-next-line no-console\r\n  //     console.error(error);\r\n  //   }\r\n  // };\r\n\r\n  private handleClickDevice = async (deviceId: string) => {\r\n    const { isUnsupported } = this.state;\r\n    const { autoPlay, persistDeviceSelection } = this.props;\r\n\r\n    this.updateState({ currentDeviceId: deviceId });\r\n\r\n    try {\r\n      await setDevice(this.token, deviceId);\r\n\r\n      /* istanbul ignore else */\r\n      if (persistDeviceSelection) {\r\n        sessionStorage.setItem('rswpDeviceId', deviceId);\r\n      }\r\n\r\n      /* istanbul ignore else */\r\n      if (isUnsupported) {\r\n        await this.syncDevice();\r\n\r\n        const player: SpotifyPlayerStatus = await getPlaybackState(this.token);\r\n\r\n        if (player && !player.is_playing && autoPlay) {\r\n          await this.togglePlay(true);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  private handleFavoriteStatusChange = (status: boolean) => {\r\n    const { isSaved } = this.state;\r\n\r\n    this.updateState({ isSaved: status });\r\n\r\n    /* istanbul ignore else */\r\n    if (isSaved !== status) {\r\n      this.handleCallback({\r\n        ...this.state,\r\n        isSaved: status,\r\n        type: TYPE.FAVORITE,\r\n      });\r\n    }\r\n  };\r\n\r\n  private handlePlayerErrors = async (type: ErrorType, message: string) => {\r\n    const { status } = this.state;\r\n    const isPlaybackError = type === ERROR_TYPE.PLAYBACK;\r\n    const isInitializationError = type === ERROR_TYPE.INITIALIZATION;\r\n\r\n    let nextStatus = status;\r\n    let devices: SpotifyDevice[] = [];\r\n\r\n    if (this.player && !isPlaybackError) {\r\n      this.player.disconnect();\r\n      this.player = undefined;\r\n    }\r\n\r\n    if (isInitializationError) {\r\n      nextStatus = STATUS.UNSUPPORTED;\r\n\r\n      ({ devices = [] } = await getDevices(this.token));\r\n    } else if (!isPlaybackError) {\r\n      nextStatus = STATUS.ERROR;\r\n    }\r\n\r\n    this.updateState({\r\n      devices,\r\n      error: message,\r\n      errorType: type,\r\n      isInitializing: false,\r\n      isUnsupported: isInitializationError,\r\n      status: nextStatus,\r\n    });\r\n  };\r\n\r\n  private handlePlayerStateChanges = async (state: Spotify.PlaybackState) => {\r\n    try {\r\n      /* istanbul ignore else */\r\n      if (state) {\r\n        const {\r\n          paused,\r\n          position,\r\n          track_window: { current_track, next_tracks, previous_tracks },\r\n        } = state;\r\n\r\n        const isPlaying = !paused;\r\n        const volume = (await this.player?.getVolume()) || 100;\r\n        let trackState = {};\r\n\r\n        if (position === 0 && current_track) {\r\n          trackState = {\r\n            nextTracks: next_tracks.map(convertTrack),\r\n            position: 0,\r\n            previousTracks: previous_tracks.map(convertTrack),\r\n            track: convertTrack(current_track),\r\n          };\r\n        }\r\n\r\n        this.updateState({\r\n          error: '',\r\n          errorType: null,\r\n          isActive: true,\r\n          isPlaying,\r\n          progressMs: position,\r\n          volume: round(volume),\r\n          ...trackState,\r\n        });\r\n      } else if (this.isExternalPlayer) {\r\n        await this.syncDevice();\r\n      } else {\r\n        this.updateState({\r\n          isActive: false,\r\n          isPlaying: false,\r\n          nextTracks: [],\r\n          position: 0,\r\n          previousTracks: [],\r\n          track: {\r\n            artists: [],\r\n            durationMs: 0,\r\n            id: '',\r\n            image: '',\r\n            name: '',\r\n            uri: '',\r\n          },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  private handlePlayerStatus = async ({ device_id }: Spotify.WebPlaybackInstance) => {\r\n    const { currentDeviceId, devices } = await this.initializeDevices(device_id);\r\n\r\n    this.updateState({\r\n      currentDeviceId,\r\n      deviceId: device_id,\r\n      devices,\r\n      isInitializing: false,\r\n      status: device_id ? STATUS.READY : STATUS.IDLE,\r\n    });\r\n  };\r\n\r\n  private handleResize = () => {\r\n    const { layout = 'responsive' } = this.props;\r\n\r\n    clearTimeout(this.resizeTimeout);\r\n\r\n    this.resizeTimeout = window.setTimeout(() => {\r\n      this.renderInlineActions = window.innerWidth >= 768 && layout === 'responsive';\r\n      this.forceUpdate();\r\n    }, 100);\r\n  };\r\n\r\n  private handleToggleMagnify = () => {\r\n    const { magnifySliderOnHover } = this.props;\r\n\r\n    if (magnifySliderOnHover) {\r\n      this.updateState(previousState => {\r\n        return { isMagnified: !previousState.isMagnified };\r\n      });\r\n    }\r\n  };\r\n\r\n  private get token(): string {\r\n    const { token } = this.props;\r\n\r\n    return token;\r\n  }\r\n\r\n  private async initializeDevices(id: string) {\r\n    const { persistDeviceSelection } = this.props;\r\n    const { devices } = await getDevices(this.token);\r\n    let currentDeviceId = id;\r\n\r\n    if (persistDeviceSelection) {\r\n      const savedDeviceId = sessionStorage.getItem('rswpDeviceId');\r\n\r\n      /* istanbul ignore else */\r\n      if (!savedDeviceId || !devices.some((d: SpotifyDevice) => d.id === savedDeviceId)) {\r\n        sessionStorage.setItem('rswpDeviceId', currentDeviceId);\r\n      } else {\r\n        currentDeviceId = savedDeviceId;\r\n      }\r\n    }\r\n\r\n    return { currentDeviceId, devices };\r\n  }\r\n\r\n  private initializePlayer = () => {\r\n    const { volume } = this.state;\r\n    const {\r\n      getOAuthToken = (callback: SpotifyPlayerCallback) => {\r\n        callback(this.token);\r\n      },\r\n      name = 'Spotify Web Player',\r\n    } = this.props;\r\n\r\n    if (!window.Spotify) {\r\n      return;\r\n    }\r\n\r\n    this.updateState({\r\n      error: '',\r\n      errorType: null,\r\n      isInitializing: true,\r\n    });\r\n\r\n    this.player = new window.Spotify.Player({\r\n      getOAuthToken,\r\n      name,\r\n      volume,\r\n    });\r\n\r\n    this.player.addListener('ready', this.handlePlayerStatus);\r\n    this.player.addListener('not_ready', this.handlePlayerStatus);\r\n    this.player.addListener('player_state_changed', this.handlePlayerStateChanges);\r\n    this.player.addListener('initialization_error', error =>\r\n      this.handlePlayerErrors(ERROR_TYPE.INITIALIZATION, error.message),\r\n    );\r\n    this.player.addListener('authentication_error', error =>\r\n      this.handlePlayerErrors(ERROR_TYPE.AUTHENTICATION, error.message),\r\n    );\r\n    this.player.addListener('account_error', error =>\r\n      this.handlePlayerErrors(ERROR_TYPE.ACCOUNT, error.message),\r\n    );\r\n    this.player.addListener('playback_error', error =>\r\n      this.handlePlayerErrors(ERROR_TYPE.PLAYBACK, error.message),\r\n    );\r\n    this.player.addListener('autoplay_failed', async () => {\r\n      // eslint-disable-next-line no-console\r\n      console.log('Autoplay is not allowed by the browser autoplay rules');\r\n    });\r\n\r\n    this.player.connect();\r\n  };\r\n\r\n  private get isExternalPlayer(): boolean {\r\n    const { currentDeviceId, deviceId, status } = this.state;\r\n\r\n    return (currentDeviceId && currentDeviceId !== deviceId) || status === STATUS.UNSUPPORTED;\r\n  }\r\n\r\n  private setExternalDevice = (id: string) => {\r\n    this.updateState({ currentDeviceId: id, isPlaying: true });\r\n  };\r\n\r\n  private setVolume = async (volume: number) => {\r\n\r\n\r\n\r\n    /* istanbul ignore else */\r\n    if (this.isExternalPlayer) {\r\n      await setVolume(this.token, Math.round(volume * 100));\r\n      await this.syncDevice();\r\n    } else if (this.player) {\r\n      await this.player.setVolume(volume);\r\n    }\r\n\r\n    this.updateState({ volume });\r\n  };\r\n\r\n  private syncDevice = async () => {\r\n    if (!this.isMounted) {\r\n      return;\r\n    }\r\n\r\n    const { deviceId } = this.state;\r\n\r\n    try {\r\n      const player: SpotifyPlayerStatus = await getPlaybackState(this.token);\r\n      let track = this.emptyTrack;\r\n\r\n      if (!player) {\r\n        throw new Error('No player');\r\n      }\r\n\r\n      /* istanbul ignore else */\r\n      if (player.item) {\r\n        track = {\r\n          artists: player.item.artists,\r\n          durationMs: player.item.duration_ms,\r\n          id: player.item.id,\r\n          image: getAlbumImage(player.item.album),\r\n          name: player.item.name,\r\n          uri: player.item.uri,\r\n        };\r\n      }\r\n\r\n      this.updateState({\r\n        error: '',\r\n        errorType: null,\r\n        isActive: true,\r\n        isPlaying: player.is_playing,\r\n        nextTracks: [],\r\n        previousTracks: [],\r\n        progressMs: player.item ? player.progress_ms : 0,\r\n        status: STATUS.READY,\r\n        track,\r\n        volume: parseVolume(player.device.volume_percent),\r\n      });\r\n    } catch (error: any) {\r\n      const state = {\r\n        isActive: false,\r\n        isPlaying: false,\r\n        position: 0,\r\n        track: this.emptyTrack,\r\n      };\r\n\r\n      if (deviceId) {\r\n        this.updateState({\r\n          currentDeviceId: deviceId,\r\n          ...state,\r\n        });\r\n\r\n        return;\r\n      }\r\n\r\n      this.updateState({\r\n        error: error.message,\r\n        errorType: ERROR_TYPE.PLAYER,\r\n        status: STATUS.ERROR,\r\n        ...state,\r\n      });\r\n    }\r\n  };\r\n\r\n  private async toggleSyncInterval(shouldSync: boolean) {\r\n    const { syncExternalDeviceInterval } = this.props;\r\n\r\n    try {\r\n      if (this.isExternalPlayer && shouldSync && !this.playerSyncInterval) {\r\n        await this.syncDevice();\r\n\r\n        clearInterval(this.playerSyncInterval);\r\n        this.playerSyncInterval = window.setInterval(\r\n          this.syncDevice,\r\n          syncExternalDeviceInterval! * 1000,\r\n        );\r\n      }\r\n\r\n      if ((!shouldSync || !this.isExternalPlayer) && this.playerSyncInterval) {\r\n        clearInterval(this.playerSyncInterval);\r\n        this.playerSyncInterval = undefined;\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  private toggleProgressBar() {\r\n    const { isPlaying } = this.state;\r\n\r\n    /* istanbul ignore else */\r\n    if (isPlaying) {\r\n      /* istanbul ignore else */\r\n      if (!this.playerProgressInterval) {\r\n        this.playerProgressInterval = window.setInterval(\r\n          this.updateSeekBar,\r\n          this.seekUpdateInterval,\r\n        );\r\n      }\r\n    } else if (this.playerProgressInterval) {\r\n      clearInterval(this.playerProgressInterval);\r\n      this.playerProgressInterval = undefined;\r\n    }\r\n  }\r\n\r\n  private toggleOffset = async () => {\r\n    const { currentDeviceId } = this.state;\r\n    const { offset, uris } = this.props;\r\n\r\n    if (typeof offset === 'number' && Array.isArray(uris)) {\r\n      await play(this.token, { deviceId: currentDeviceId, offset, uris });\r\n    }\r\n  };\r\n\r\n  private togglePlay = async (force = false) => {\r\n    const { currentDeviceId, isPlaying, needsUpdate } = this.state;\r\n    const { offset, uris } = this.props;\r\n    const shouldInitialize = force || needsUpdate;\r\n    const playOptions = this.getPlayOptions(uris);\r\n\r\n    try {\r\n      /* istanbul ignore else */\r\n      if (this.isExternalPlayer) {\r\n        if (!isPlaying) {\r\n          await play(this.token, {\r\n            deviceId: currentDeviceId,\r\n            offset,\r\n            ...(shouldInitialize ? playOptions : undefined),\r\n          });\r\n        } else {\r\n          await pause(this.token);\r\n\r\n          this.updateState({ isPlaying: false });\r\n        }\r\n\r\n        this.syncTimeout = window.setTimeout(() => {\r\n          this.syncDevice();\r\n        }, 300);\r\n      } else if (this.player) {\r\n        await this.player.activateElement();\r\n\r\n        const playerState = await this.player.getCurrentState();\r\n        const shouldPlay = !playerState && !!(playOptions.context_uri || playOptions.uris);\r\n\r\n        // eslint-disable-next-line unicorn/prefer-ternary\r\n        if (shouldPlay || shouldInitialize) {\r\n          await play(this.token, {\r\n            deviceId: currentDeviceId,\r\n            offset,\r\n            ...(shouldInitialize ? playOptions : undefined),\r\n          });\r\n          await this.player.togglePlay();\r\n        } else {\r\n          await this.player.togglePlay();\r\n        }\r\n      }\r\n\r\n      if (needsUpdate) {\r\n        this.updateState({ needsUpdate: false });\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  private updateSeekBar = async () => {\r\n    if (!this.isMounted) {\r\n      return;\r\n    }\r\n\r\n    const { progressMs, track } = this.state;\r\n\r\n    try {\r\n      /* istanbul ignore else */\r\n      if (this.isExternalPlayer) {\r\n        let position = progressMs / track.durationMs;\r\n\r\n        position = Number(((Number.isFinite(position) ? position : 0) * 100).toFixed(1));\r\n\r\n        this.updateState({\r\n          position,\r\n          progressMs: progressMs + this.seekUpdateInterval,\r\n        });\r\n      } else if (this.player) {\r\n        const state = await this.player.getCurrentState();\r\n\r\n        /* istanbul ignore else */\r\n        if (state) {\r\n          const progress = state.position;\r\n          const position = Number(\r\n            ((progress / state.track_window.current_track.duration_ms) * 100).toFixed(1),\r\n          );\r\n\r\n          this.updateState({\r\n            position,\r\n            progressMs: progress + this.seekUpdateInterval,\r\n          });\r\n        }\r\n      }\r\n    } catch (error) {\r\n      // eslint-disable-next-line no-console\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  private updateState: typeof this.setState = state => {\r\n    if (!this.isMounted) {\r\n      return;\r\n    }\r\n\r\n    this.setState(state);\r\n  };\r\n\r\n  public render() {\r\n    const {\r\n      currentDeviceId,\r\n      deviceId,\r\n      devices,\r\n      error,\r\n      isActive,\r\n      isMagnified,\r\n      // isPlaying,\r\n      isUnsupported,\r\n      // nextTracks,\r\n      playerPosition,\r\n      position,\r\n      // previousTracks,\r\n      progressMs,\r\n      status,\r\n      track,\r\n      volume,\r\n    } = this.state;\r\n    const {\r\n      hideAttribution = false,\r\n      hideCoverArt = false,\r\n      inlineVolume = true,\r\n      layout = 'responsive',\r\n      showSaveIcon,\r\n      updateSavedStatus,\r\n    } = this.props;\r\n    const isReady = ([STATUS.READY, STATUS.UNSUPPORTED] as Status[]).includes(status);\r\n\r\n    const output: Record<string, ReactNode> = {\r\n      main: <Loader styles={this.styles} />,\r\n    };\r\n\r\n    if (isReady) {\r\n      /* istanbul ignore else */\r\n      if (!output.info) {\r\n        output.info = (\r\n          <Info\r\n            hideAttribution={hideAttribution}\r\n            hideCoverArt={hideCoverArt}\r\n            isActive={isActive}\r\n            layout={layout}\r\n            locale={this.locale}\r\n            onFavoriteStatusChange={this.handleFavoriteStatusChange}\r\n            showSaveIcon={showSaveIcon!}\r\n            styles={this.styles}\r\n            token={this.token}\r\n            track={track}\r\n            updateSavedStatus={updateSavedStatus}\r\n          />\r\n        );\r\n      }\r\n\r\n      output.devices = (\r\n        <Devices\r\n          currentDeviceId={currentDeviceId}\r\n          deviceId={deviceId}\r\n          devices={devices}\r\n          layout={layout}\r\n          locale={this.locale}\r\n          onClickDevice={this.handleClickDevice}\r\n          open={isUnsupported && !deviceId}\r\n          playerPosition={playerPosition}\r\n          styles={this.styles}\r\n        />\r\n      );\r\n\r\n      output.volume = currentDeviceId ? (\r\n        <Volume\r\n          inlineVolume={inlineVolume}\r\n          layout={layout}\r\n          locale={this.locale}\r\n          playerPosition={playerPosition}\r\n          setVolume={this.setVolume}\r\n          styles={this.styles}\r\n          volume={volume}\r\n        />\r\n      ) : null;\r\n\r\n      if (this.renderInlineActions) {\r\n        output.actions = (\r\n          <Actions layout={layout} styles={this.styles}>\r\n            {output.devices}\r\n            {output.volume}\r\n          </Actions>\r\n        );\r\n      }\r\n\r\n      output.controls = (\r\n        <Controls\r\n          // devices={this.renderInlineActions ? null : output.devices}\r\n          durationMs={track.durationMs}\r\n          // isExternalDevice={this.isExternalPlayer}\r\n          isMagnified={isMagnified}\r\n          // isPlaying={isPlaying}\r\n          // layout={layout}\r\n          // locale={this.locale}\r\n          // nextTracks={nextTracks}\r\n          onChangeRange={this.handleChangeRange}\r\n          // onClickNext={this.handleClickNext}\r\n          // onClickPrevious={this.handleClickPrevious}\r\n          // onClickTogglePlay={this.handleClickTogglePlay}\r\n          onToggleMagnify={this.handleToggleMagnify}\r\n          position={position}\r\n          // previousTracks={previousTracks}\r\n          progressMs={progressMs}\r\n          styles={this.styles}\r\n          // volume={this.renderInlineActions ? null : output.volume}\r\n        />\r\n      );\r\n\r\n      output.main = (\r\n        <Wrapper layout={layout} styles={this.styles}>\r\n          {/* {output.info} */}\r\n          {output.controls}\r\n          {/* {output.actions} */}\r\n        </Wrapper>\r\n      );\r\n    } else if (output.info) {\r\n      output.main = output.info;\r\n    }\r\n\r\n    if (status === STATUS.ERROR) {\r\n      output.main = <ErrorMessage styles={this.styles}>{error}</ErrorMessage>;\r\n    }\r\n\r\n    return (\r\n      // <Player ref={this.ref} data-ready={isReady} styles={this.styles}>\r\n      <div>\r\n        {output.main}\r\n      </div>\r\n\r\n      // </Player> \r\n    );\r\n  }\r\n}\r\n\r\nexport * from './types';\r\nexport { ERROR_TYPE, STATUS, TYPE } from './constants';\r\n\r\nexport default SpotifyWebPlayer;\r\n","import React, { memo, ReactNode } from 'react';\r\n\r\nimport { CssLikeObject, px, styled } from '../modules/styled';\r\nimport { Layout, StyledProps, StylesOptions } from '../types';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  layout: Layout;\r\n  styles: StylesOptions;\r\n}\r\n\r\nconst Wrapper = styled('div')(\r\n  {\r\n    alignItems: 'center',\r\n    display: 'flex',\r\n    justifyContent: 'flex-end',\r\n    'pointer-events': 'none',\r\n  },\r\n  ({ style }: StyledProps) => {\r\n    let styles: CssLikeObject = {\r\n      bottom: 0,\r\n      position: 'absolute',\r\n      right: 0,\r\n      width: 'auto',\r\n    };\r\n\r\n    if (style.layout === 'responsive') {\r\n      styles = {\r\n        '@media (max-width: 767px)': styles,\r\n        '@media (min-width: 768px)': {\r\n          height: px(style.h),\r\n        },\r\n      };\r\n    }\r\n\r\n    return {\r\n      height: px(32),\r\n      ...styles,\r\n    };\r\n  },\r\n  'ActionsRSWP',\r\n);\r\n\r\nfunction Actions(props: Props) {\r\n  const { children, layout, styles } = props;\r\n\r\n  return (\r\n    <Wrapper data-component-name=\"Actions\" style={{ h: styles.height, layout }}>\r\n      {children}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default memo(Actions);\r\n","/* eslint-disable import/extensions */\r\n/* tslint:disable:object-literal-sort-keys */\r\nimport { createElement, FunctionComponent } from 'react';\r\nimport { create, CssLikeObject, NanoRenderer } from 'nano-css';\r\n// @ts-ignore\r\nimport { addon as addonJSX } from 'nano-css/addon/jsx.js';\r\nimport { addon as addonKeyframes } from 'nano-css/addon/keyframes.js';\r\n// @ts-ignore\r\nimport { addon as addonNesting } from 'nano-css/addon/nesting.js';\r\nimport { addon as addonRule } from 'nano-css/addon/rule.js';\r\n// @ts-ignore\r\nimport { addon as addonStyle } from 'nano-css/addon/style.js';\r\n// @ts-ignore\r\nimport { addon as addonStyled } from 'nano-css/addon/styled.js';\r\n\r\nimport { StyledProps } from '../types';\r\n\r\ninterface NanoExtended extends NanoRenderer {\r\n  styled: (\r\n    tag: string,\r\n  ) => (\r\n    styles: CssLikeObject,\r\n    dynamicTemplate?: (props: StyledProps) => CssLikeObject,\r\n    block?: string,\r\n  ) => FunctionComponent<Partial<StyledProps>>;\r\n}\r\n\r\nconst nano = create({ h: createElement });\r\n\r\naddonRule(nano);\r\naddonKeyframes(nano);\r\naddonJSX(nano);\r\naddonStyle(nano);\r\naddonStyled(nano);\r\naddonNesting(nano);\r\n\r\nconst { keyframes, put, styled } = nano as NanoExtended;\r\n\r\nexport const px = (value: string | number): string =>\r\n  typeof value === 'number' ? `${value}px` : value;\r\n\r\nexport { keyframes, put, styled };\r\n\r\nexport { type CssLikeObject } from 'nano-css';\r\n","import React, { memo } from 'react';\r\n\r\n// import Next from './icons/Next';\r\n// import Pause from './icons/Pause';\r\n// import Play from './icons/Play';\r\n// import Previous from './icons/Previous';\r\nimport Slider from './Slider';\r\n\r\n// import { CssLikeObject, px, styled } from '../modules/styled';\r\nimport {\r\n  //  Layout,\r\n  // Locale, \r\n  // SpotifyTrack, \r\n  // StyledProps, \r\n  StylesOptions } from '../types';\r\n\r\ninterface Props {\r\n  // devices: JSX.Element | null;\r\n  durationMs: number;\r\n  // isExternalDevice: boolean;\r\n  isMagnified: boolean;\r\n  // isPlaying: boolean;\r\n  // layout: Layout;\r\n  // locale: Locale;\r\n  // nextTracks: SpotifyTrack[];\r\n  onChangeRange: (position: number) => void;\r\n  // onClickNext: () => void;\r\n  // onClickPrevious: () => void;\r\n  // onClickTogglePlay: () => void;\r\n  onToggleMagnify: () => void;\r\n  position: number;\r\n  // previousTracks: SpotifyTrack[];\r\n  progressMs: number;\r\n  styles: StylesOptions;\r\n  // volume: JSX.Element | null;\r\n}\r\n\r\n// const Wrapper = styled('div')(\r\n//   {\r\n//     '.rswp__volume': {\r\n//       position: 'absolute',\r\n//       right: 0,\r\n//       top: 0,\r\n//     },\r\n//     '.rswp__devices': {\r\n//       position: 'absolute',\r\n//       left: 0,\r\n//       top: 0,\r\n//     },\r\n//   },\r\n//   ({ style }: StyledProps) => {\r\n//     const isCompactLayout = style.layout === 'compact';\r\n//     const styles: CssLikeObject = {};\r\n\r\n//     if (isCompactLayout) {\r\n//       styles.padding = px(8);\r\n//     } else {\r\n//       styles.padding = `${px(4)} 0`;\r\n//       styles['@media (max-width: 767px)'] = {\r\n//         padding: px(8),\r\n//       };\r\n//     }\r\n\r\n//     return styles;\r\n//   },\r\n//   'ControlsRSWP',\r\n// );\r\n\r\n// const Buttons = styled('div')(\r\n//   {\r\n//     alignItems: 'center',\r\n//     display: 'flex',\r\n//     justifyContent: 'center',\r\n//     marginBottom: px(8),\r\n//     position: 'relative',\r\n\r\n//     '> div': {\r\n//       alignItems: 'center',\r\n//       display: 'flex',\r\n//       minWidth: px(32),\r\n//       textAlign: 'center',\r\n//     },\r\n//   },\r\n//   ({ style }: StyledProps) => ({\r\n//     color: style.c,\r\n//   }),\r\n//   'ControlsButtonsRSWP',\r\n// );\r\n\r\n// const Button = styled('button')(\r\n//   {\r\n//     alignItems: 'center',\r\n//     display: 'inline-flex',\r\n//     fontSize: px(16),\r\n//     height: px(32),\r\n//     justifyContent: 'center',\r\n//     width: px(32),\r\n\r\n//     '&.rswp__toggle': {\r\n//       fontSize: px(32),\r\n//       width: px(48),\r\n//     },\r\n//   },\r\n//   () => ({}),\r\n//   'ControlsButtonRSWP',\r\n// );\r\n\r\nfunction Controls(props: Props) {\r\n  const {\r\n    // devices,\r\n    durationMs,\r\n    // isExternalDevice,\r\n    isMagnified,\r\n    // isPlaying,\r\n    // layout,\r\n    // locale,\r\n    // nextTracks,\r\n    onChangeRange,\r\n    // onClickNext,\r\n    // onClickPrevious,\r\n    // onClickTogglePlay,\r\n    onToggleMagnify,\r\n    position,\r\n    // previousTracks,\r\n    progressMs,\r\n    styles,\r\n    // volume,\r\n  } = props;\r\n\r\n  // const { color } = styles;\r\n\r\n  return (\r\n    <div>\r\n\r\n      \r\n      <Slider\r\n        durationMs={durationMs}\r\n        isMagnified={isMagnified}\r\n        onChangeRange={onChangeRange}\r\n        onToggleMagnify={onToggleMagnify}\r\n        position={position}\r\n        progressMs={progressMs}\r\n        styles={styles}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(Controls);\r\n\r\n\r\n// eslint-disable-next-line no-lone-blocks\r\n{/* <Wrapper data-component-name=\"Controls\" data-playing={isPlaying} style={{ layout }}>\r\n<Buttons style={{ c: color }}>\r\n {devices && <div className=\"rswp__devices\">{devices}</div>}\r\n <div>\r\n   {(!!previousTracks.length || isExternalDevice) && (\r\n     <Button\r\n       aria-label={locale.previous}\r\n       onClick={onClickPrevious}\r\n       title={locale.previous}\r\n       type=\"button\"\r\n     >\r\n       <Previous />\r\n     </Button>\r\n   )}\r\n </div>\r\n <div>\r\n   <Button\r\n     aria-label={isPlaying ? locale.pause : locale.play}\r\n     className=\"rswp__toggle\"\r\n     onClick={onClickTogglePlay}\r\n     title={isPlaying ? locale.pause : locale.play}\r\n     type=\"button\"\r\n   >\r\n     {isPlaying ? <Pause /> : <Play />}\r\n   </Button>\r\n </div>\r\n <div>\r\n   {(!!nextTracks.length || isExternalDevice) && (\r\n     <Button\r\n       aria-label={locale.next}\r\n       onClick={onClickNext}\r\n       title={locale.next}\r\n       type=\"button\"\r\n     >\r\n       <Next />\r\n     </Button>\r\n   )}\r\n </div>\r\n</Buttons> \r\n</Wrapper> */}","import React, { memo } from 'react';\r\nimport RangeSlider, { RangeSliderPosition } from '@gilbarbara/react-range-slider';\r\n\r\nimport { millisecondsToTime } from '../modules/helpers';\r\nimport { px, styled } from '../modules/styled';\r\nimport { StyledProps, StylesOptions } from '../types';\r\n\r\ninterface Props {\r\n  durationMs: number;\r\n  isMagnified: boolean;\r\n  onChangeRange: (position: number) => void;\r\n  onToggleMagnify: () => void;\r\n  position: number;\r\n  progressMs: number;\r\n  styles: StylesOptions;\r\n}\r\n\r\nconst Wrapper = styled('div')(\r\n  {\r\n    alignItems: 'center',\r\n    display: 'flex',\r\n    fontSize: px(12),\r\n    transition: 'height 0.3s',\r\n    zIndex: 10,\r\n  },\r\n  ({ style }: StyledProps) => ({\r\n    '[class^=\"rswp_\"]': {\r\n      color: style.c,\r\n      lineHeight: 1,\r\n      minWidth: px(32),\r\n    },\r\n\r\n    '.rswp_progress': {\r\n      \r\n      textAlign: 'right',\r\n    },\r\n\r\n    '.rswp_duration': {\r\n      \r\n      textAlign: 'left',\r\n    },\r\n  }),\r\n  'SliderRSWP',\r\n);\r\n\r\nfunction Slider(props: Props) {\r\n  const { durationMs, isMagnified, onChangeRange, onToggleMagnify, position, progressMs, styles } =\r\n    props;\r\n\r\n  const handleChangeRange = async ({ x }: RangeSliderPosition) => {\r\n    onChangeRange(x);\r\n  };\r\n\r\n  const handleSize = styles.sliderHeight + 6;\r\n\r\n  return (\r\n    <Wrapper\r\n      data-component-name=\"Slider\"\r\n      data-position={position}\r\n      onMouseEnter={onToggleMagnify}\r\n      onMouseLeave={onToggleMagnify}\r\n      style={{\r\n        c: styles.color,\r\n        sliderHeight: styles.sliderHeight,\r\n      }}\r\n    >\r\n      <div className=\"rswp_progress\" style={{fontFamily:styles.sliderDurationFontFamily, fontSize:styles.sliderDurationFontSize}}>{millisecondsToTime(progressMs)}</div>\r\n      <RangeSlider\r\n        axis=\"x\"\r\n        className=\"slider\"\r\n        data-component-name=\"progress-bar\"\r\n        onChange={handleChangeRange}\r\n        styles={{\r\n          options: {\r\n            thumbBorder: 0,\r\n            thumbBorderRadius: styles.sliderHandleBorderRadius,\r\n            thumbColor: \"blue\",\r\n            thumbSize: isMagnified ? handleSize + 4 : handleSize,\r\n            height: isMagnified ? styles.sliderHeight + 4 : styles.sliderHeight,\r\n            padding: \"0px 13px\",\r\n            rangeColor: styles.sliderColor,\r\n            trackBorderRadius: styles.sliderTrackBorderRadius,\r\n            trackColor: \"red\",\r\n            width:\"100%\"\r\n          },\r\n        }}\r\n        x={position}\r\n        xMax={100}\r\n        xMin={0}\r\n        xStep={0.1}\r\n      />\r\n      <div className=\"rswp_duration\" style={{fontFamily:styles.sliderDurationFontFamily , fontSize:styles.sliderDurationFontSize}}>{millisecondsToTime(durationMs)}</div>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default memo(Slider);\r\n","/* eslint-disable camelcase */\r\nimport { SpotifyTrack } from '../types';\r\n\r\nexport function convertTrack(track: Spotify.Track): SpotifyTrack {\r\n  const { album, artists, duration_ms, id, name, uri } = track;\r\n\r\n  return {\r\n    artists,\r\n    durationMs: duration_ms,\r\n    id: id ?? '',\r\n    image: getAlbumImage(album),\r\n    name,\r\n    uri,\r\n  };\r\n}\r\n\r\nexport function getAlbumImage(album: Spotify.Album) {\r\n  const maxWidth = Math.max(...album.images.map(d => d.width || 0));\r\n\r\n  return album.images.find(d => d.width === maxWidth)?.url || '';\r\n}\r\n\r\nexport function isNumber(value: unknown): value is number {\r\n  return typeof value === 'number';\r\n}\r\n\r\nexport function loadSpotifyPlayer(): Promise<any> {\r\n  return new Promise<void>((resolve, reject) => {\r\n    const scriptTag = document.getElementById('spotify-player');\r\n\r\n    if (!scriptTag) {\r\n      const script = document.createElement('script');\r\n\r\n      script.id = 'spotify-player';\r\n      script.type = 'text/javascript';\r\n      script.async = false;\r\n      script.defer = true;\r\n      script.src = 'https://sdk.scdn.co/spotify-player.js';\r\n      script.onload = () => resolve();\r\n      script.onerror = (error: any) => reject(new Error(`loadScript: ${error.message}`));\r\n\r\n      document.head.appendChild(script);\r\n    } else {\r\n      resolve();\r\n    }\r\n  });\r\n}\r\n\r\nexport function millisecondsToTime(input: number) {\r\n  const seconds = Math.floor((input / 1000) % 60);\r\n  const minutes = Math.floor((input / (1000 * 60)) % 60);\r\n  const hours = Math.floor((input / (1000 * 60 * 60)) % 24);\r\n\r\n  const parts: string[] = [];\r\n\r\n  if (hours > 0) {\r\n    parts.push(\r\n      `${hours}`.padStart(2, '0'),\r\n      `${minutes}`.padStart(2, '0'),\r\n      `${seconds}`.padStart(2, '0'),\r\n    );\r\n  } else {\r\n    parts.push(`${minutes}`, `${seconds}`.padStart(2, '0'));\r\n  }\r\n\r\n  return parts.join(':');\r\n}\r\n\r\nexport function parseVolume(value?: unknown): number {\r\n  if (!isNumber(value)) {\r\n    return 1;\r\n  }\r\n\r\n  if (value > 1) {\r\n    return value / 100;\r\n  }\r\n\r\n  return value;\r\n}\r\n\r\n/**\r\n * Round decimal numbers\r\n */\r\nexport function round(number: number, digits = 2) {\r\n  const factor = 10 ** digits;\r\n\r\n  return Math.round(number * factor) / factor;\r\n}\r\n\r\nexport function validateURI(input: string): boolean {\r\n  const validTypes = ['album', 'artist', 'playlist', 'show', 'track'];\r\n\r\n  /* istanbul ignore else */\r\n  if (input && input.indexOf(':') > -1) {\r\n    const [key, type, id] = input.split(':');\r\n\r\n    /* istanbul ignore else */\r\n    if (key === 'spotify' && validTypes.indexOf(type) >= 0 && id.length === 22) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n","import React, { MouseEvent, useCallback, useState } from 'react';\r\nimport { CssLikeObject } from 'nano-css';\r\n\r\nimport ClickOutside from './ClickOutside';\r\nimport DevicesIcon from './icons/Devices';\r\nimport DevicesComputerIcon from './icons/DevicesComputer';\r\nimport DevicesMobileIcon from './icons/DevicesMobile';\r\nimport DevicesSpeakerIcon from './icons/DevicesSpeaker';\r\n\r\nimport { px, styled } from '../modules/styled';\r\nimport { Layout, Locale, SpotifyDevice, StyledProps, StylesOptions } from '../types';\r\n\r\ninterface Props {\r\n  currentDeviceId?: string;\r\n  deviceId?: string;\r\n  devices: SpotifyDevice[];\r\n  layout: Layout;\r\n  locale: Locale;\r\n  onClickDevice: (deviceId: string) => any;\r\n  open: boolean;\r\n  playerPosition: string;\r\n  styles: StylesOptions;\r\n}\r\n\r\ninterface DeviceList {\r\n  currentDevice: SpotifyDevice | null;\r\n  otherDevices: SpotifyDevice[];\r\n}\r\n\r\nconst Wrapper = styled('div')(\r\n  {\r\n    'pointer-events': 'all',\r\n    alignItems: 'center',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    position: 'relative',\r\n    zIndex: 20,\r\n\r\n    '> div': {\r\n      backgroundColor: '#000',\r\n      borderRadius: px(8),\r\n      color: '#fff',\r\n      filter: 'drop-shadow(1px 1px 6px rgba(0, 0, 0, 0.5))',\r\n      fontSize: px(14),\r\n      padding: px(16),\r\n      position: 'absolute',\r\n      textAlign: 'left',\r\n\r\n      '> p': {\r\n        fontWeight: 'bold',\r\n        marginBottom: px(8),\r\n        marginTop: px(16),\r\n        whiteSpace: 'nowrap',\r\n      },\r\n\r\n      button: {\r\n        alignItems: 'center',\r\n        display: 'flex',\r\n        whiteSpace: 'nowrap',\r\n\r\n        '&:not(:last-of-type)': {\r\n          marginBottom: px(12),\r\n        },\r\n\r\n        span: {\r\n          display: 'inline-block',\r\n          marginLeft: px(4),\r\n        },\r\n      },\r\n\r\n      '> span': {\r\n        background: 'transparent',\r\n        borderLeft: `6px solid transparent`,\r\n        borderRight: `6px solid transparent`,\r\n        content: '\"\"',\r\n        display: 'block',\r\n        height: 0,\r\n        position: 'absolute',\r\n        width: 0,\r\n      },\r\n    },\r\n\r\n    '> button': {\r\n      alignItems: 'center',\r\n      display: 'flex',\r\n      fontSize: px(24),\r\n      height: px(32),\r\n      justifyContent: 'center',\r\n      width: px(32),\r\n    },\r\n  },\r\n  ({ style }: StyledProps) => {\r\n    const isCompact = style.layout === 'compact';\r\n    const divStyles: CssLikeObject = isCompact\r\n      ? {\r\n          bottom: '120%',\r\n          left: 0,\r\n        }\r\n      : {\r\n          [style.p]: '120%',\r\n          left: 0,\r\n\r\n          '@media (min-width: 768px)': {\r\n            left: 'auto',\r\n            right: 0,\r\n          },\r\n        };\r\n    const spanStyles: CssLikeObject = isCompact\r\n      ? {\r\n          bottom: `-${px(6)}`,\r\n          borderTop: `6px solid #000`,\r\n          left: px(10),\r\n        }\r\n      : {\r\n          [style.p === 'top' ? 'border-bottom' : 'border-top']: `6px solid #000`,\r\n          [style.p]: '-6px',\r\n          left: px(10),\r\n\r\n          '@media (min-width: 768px)': {\r\n            left: 'auto',\r\n            right: px(10),\r\n          },\r\n        };\r\n\r\n    return {\r\n      '> button': {\r\n        color: style.c,\r\n      },\r\n\r\n      '> div': {\r\n        ...divStyles,\r\n\r\n        '> span': spanStyles,\r\n      },\r\n    };\r\n  },\r\n  'DevicesRSWP',\r\n);\r\n\r\nconst ListHeader = styled('div')({\r\n  p: {\r\n    whiteSpace: 'nowrap',\r\n\r\n    '&:nth-of-type(1)': {\r\n      fontWeight: 'bold',\r\n      marginBottom: px(8),\r\n    },\r\n\r\n    '&:nth-of-type(2)': {\r\n      alignItems: 'center',\r\n      display: 'flex',\r\n\r\n      span: {\r\n        display: 'inline-block',\r\n        marginLeft: px(4),\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nfunction getDeviceIcon(type: string) {\r\n  if (type.toLowerCase().includes('speaker')) {\r\n    return <DevicesSpeakerIcon />;\r\n  }\r\n\r\n  if (type.toLowerCase().includes('computer')) {\r\n    return <DevicesComputerIcon />;\r\n  }\r\n\r\n  return <DevicesMobileIcon />;\r\n}\r\n\r\nexport default function Devices(props: Props) {\r\n  const {\r\n    currentDeviceId,\r\n    deviceId,\r\n    devices,\r\n    layout,\r\n    locale,\r\n    onClickDevice,\r\n    open,\r\n    playerPosition,\r\n    styles: { color },\r\n  } = props;\r\n  const [isOpen, setOpen] = useState(open);\r\n\r\n  const handleClickSetDevice = (event: MouseEvent<HTMLElement>) => {\r\n    const { dataset } = event.currentTarget;\r\n\r\n    /* istanbul ignore else */\r\n    if (dataset.id) {\r\n      onClickDevice(dataset.id);\r\n\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleClickToggleList = useCallback(() => {\r\n    setOpen(s => !s);\r\n  }, []);\r\n\r\n  const { currentDevice, otherDevices } = devices.reduce<DeviceList>(\r\n    (acc, device) => {\r\n      if (device.id === currentDeviceId) {\r\n        acc.currentDevice = device;\r\n      } else {\r\n        acc.otherDevices.push(device);\r\n      }\r\n\r\n      return acc;\r\n    },\r\n    { currentDevice: null, otherDevices: [] },\r\n  );\r\n\r\n  let icon = <DevicesIcon />;\r\n\r\n  if (deviceId && currentDevice && currentDevice.id !== deviceId) {\r\n    icon = getDeviceIcon(currentDevice.type);\r\n  }\r\n\r\n  return (\r\n    <ClickOutside isActive={isOpen} onClick={handleClickToggleList}>\r\n      <Wrapper\r\n        data-component-name=\"Devices\"\r\n        data-device-id={currentDeviceId}\r\n        style={{\r\n          c: color,\r\n          layout,\r\n          p: playerPosition,\r\n        }}\r\n      >\r\n        {!!devices.length && (\r\n          <>\r\n            {isOpen && (\r\n              <div>\r\n                {currentDevice && (\r\n                  <ListHeader>\r\n                    <p>{locale.currentDevice}</p>\r\n                    <p>\r\n                      {getDeviceIcon(currentDevice.type)}\r\n                      <span>{currentDevice.name}</span>\r\n                    </p>\r\n                  </ListHeader>\r\n                )}\r\n                {!!otherDevices.length && (\r\n                  <>\r\n                    <p>{locale.otherDevices}</p>\r\n                    {otherDevices.map(device => (\r\n                      <button\r\n                        key={device.id}\r\n                        aria-label={device.name}\r\n                        data-id={device.id}\r\n                        onClick={handleClickSetDevice}\r\n                        type=\"button\"\r\n                      >\r\n                        {getDeviceIcon(device.type)}\r\n                        <span>{device.name}</span>\r\n                      </button>\r\n                    ))}\r\n                  </>\r\n                )}\r\n                <span />\r\n              </div>\r\n            )}\r\n            <button\r\n              aria-label={locale.devices}\r\n              onClick={handleClickToggleList}\r\n              title={locale.devices}\r\n              type=\"button\"\r\n            >\r\n              {icon}\r\n            </button>\r\n          </>\r\n        )}\r\n      </Wrapper>\r\n    </ClickOutside>\r\n  );\r\n}\r\n","import React, { memo, ReactNode, useEffect, useRef } from 'react';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  isActive: boolean;\r\n  onClick: () => void;\r\n}\r\n\r\nfunction ClickOutside(props: Props) {\r\n  const { children, isActive, onClick, ...rest } = props;\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const isTouch = useRef(false);\r\n\r\n  const handleClick = useRef((event: MouseEvent | TouchEvent) => {\r\n    const container = containerRef.current;\r\n\r\n    if (event.type === 'touchend') {\r\n      isTouch.current = true;\r\n    }\r\n\r\n    if (event.type === 'click' && isTouch.current) {\r\n      return;\r\n    }\r\n\r\n    if (container && !container.contains(event.target as Node)) {\r\n      onClick();\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const { current } = handleClick;\r\n\r\n    if (isActive) {\r\n      document.addEventListener('touchend', current, true);\r\n      document.addEventListener('click', current, true);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('touchend', current, true);\r\n      document.removeEventListener('click', current, true);\r\n    };\r\n  }, [isActive]);\r\n\r\n  return (\r\n    <div ref={containerRef} {...rest}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(ClickOutside);\r\n","import React from \"react\"\r\n\r\nexport default function DevicesIcon(props: any) {\r\n  return (\r\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\r\n      <path\r\n        d=\"M57 4c3.864 0 7 3.136 7 7v42a7 7 0 0 1-7 7H31a7 7 0 0 1-7-7V11c0-3.864 3.136-7 7-7h26ZM16 54v6H8v-6h8Zm41-44H31a1 1 0 0 0-1 1v42a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V11a1 1 0 0 0-1-1ZM44 32a8 8 0 1 1 0 16 8 8 0 0 1 0-16ZM16 4v6H7a1 1 0 0 0-1 1v26a1 1 0 0 0 1 1h9v6H7a7 7 0 0 1-7-7V11c0-3.864 3.136-7 7-7h9Zm28 12a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\"\r\n\r\nexport default function DevicesComputerIcon(props: any) {\r\n  return (\r\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\r\n      <path\r\n        d=\"M7.226 10.323a7.228 7.228 0 0 1 7.226-7.226h35.096a7.228 7.228 0 0 1 7.226 7.226V37.16a7.226 7.226 0 0 1-7.226 7.226H14.452a7.226 7.226 0 0 1-7.226-7.226V10.323Zm7.226-1.033c-.57 0-1.033.462-1.033 1.033V37.16c0 .57.463 1.033 1.033 1.033h35.096c.57 0 1.033-.463 1.033-1.033V10.323c0-.57-.463-1.033-1.033-1.033H14.452ZM0 57.806a3.097 3.097 0 0 1 3.097-3.096h57.806a3.097 3.097 0 0 1 0 6.193H3.097A3.097 3.097 0 0 1 0 57.806Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\"\r\n\r\nexport default function DevicesMobileIcon(props: any) {\r\n  return (\r\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\r\n      <path\r\n        d=\"M44.8 0a9.6 9.6 0 0 1 9.6 9.6v44.8a9.6 9.6 0 0 1-9.6 9.6H19.2a9.6 9.6 0 0 1-9.6-9.6V9.6A9.6 9.6 0 0 1 19.2 0h25.6Zm0 6.4H19.2A3.2 3.2 0 0 0 16 9.6v44.8a3.2 3.2 0 0 0 3.2 3.2h25.6a3.2 3.2 0 0 0 3.2-3.2V9.6a3.2 3.2 0 0 0-3.2-3.2ZM32 43.2a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\"\r\n\r\nexport default function DevicesSpeakerIcon(props: any) {\r\n  return (\r\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\r\n      <path\r\n        d=\"M45 4c3.864 0 7 3.136 7 7v42a7 7 0 0 1-7 7H19a7 7 0 0 1-7-7V11c0-3.864 3.136-7 7-7h26Zm0 6H19a1 1 0 0 0-1 1v42a1 1 0 0 0 1 1h26a1 1 0 0 0 1-1V11a1 1 0 0 0-1-1ZM32 32a8 8 0 1 1 0 16 8 8 0 0 1 0-16Zm0-16a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\"\r\n\r\nimport { px, styled } from '../modules/styled';\r\nimport { ComponentsProps, StyledProps } from '../types';\r\n\r\nconst Wrapper = styled('div')(\r\n  {\r\n    alignItems: 'center',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    textAlign: 'center',\r\n    width: '100%',\r\n  },\r\n  ({ style }: StyledProps) => ({\r\n    backgroundColor: style.bgColor,\r\n    borderTop: `1px solid ${style.errorColor}`,\r\n    color: style.errorColor,\r\n    height: px(style.h),\r\n  }),\r\n  'ErrorRSWP',\r\n);\r\n\r\nexport default function ErrorMessage({\r\n  children,\r\n  styles: { bgColor, errorColor, height },\r\n}: ComponentsProps) {\r\n  return (\r\n    <Wrapper data-component-name=\"ErrorMessage\" style={{ bgColor, errorColor, h: height }}>\r\n      {children}\r\n    </Wrapper>\r\n  );\r\n}\r\n","import React, { memo, ReactNode, useEffect, useRef, useState } from 'react';\r\nimport { fade } from 'colorizr';\r\n\r\nimport Favorite from './icons/Favorite';\r\nimport FavoriteOutline from './icons/FavoriteOutline';\r\nimport SpotifyLogo from './SpotifyLogo';\r\n\r\nimport { getSpotifyLink, getSpotifyLinkTitle } from '../modules/getters';\r\nimport { usePrevious } from '../modules/hooks';\r\nimport { checkTracksStatus, removeTracks, saveTracks } from '../modules/spotify';\r\nimport { CssLikeObject, px, styled } from '../modules/styled';\r\nimport { Layout, Locale, SpotifyTrack, StyledProps, StylesOptions } from '../types';\r\n\r\ninterface Props {\r\n  hideAttribution: boolean;\r\n  hideCoverArt: boolean;\r\n  isActive: boolean;\r\n  layout: Layout;\r\n  locale: Locale;\r\n  onFavoriteStatusChange: (status: boolean) => any;\r\n  showSaveIcon: boolean;\r\n  styles: StylesOptions;\r\n  token: string;\r\n  track: SpotifyTrack;\r\n  updateSavedStatus?: (fn: (status: boolean) => any) => any;\r\n}\r\n\r\nconst imageSize = 64;\r\nconst iconSize = 32;\r\n\r\nconst Wrapper = styled('div')(\r\n  {\r\n    textAlign: 'left',\r\n\r\n    '> a': {\r\n      display: 'inline-flex',\r\n      textDecoration: 'none',\r\n      minHeigth: px(64),\r\n      minWidth: px(64),\r\n\r\n      '&:hover': {\r\n        textDecoration: 'underline',\r\n      },\r\n    },\r\n\r\n    button: {\r\n      alignItems: 'center',\r\n      display: 'flex',\r\n      fontSize: px(16),\r\n      height: px(iconSize + 8),\r\n      justifyContent: 'center',\r\n      width: px(iconSize),\r\n    },\r\n  },\r\n  ({ style }: StyledProps) => {\r\n    const isCompactLayout = style.layout === 'compact';\r\n    const styles: CssLikeObject = {};\r\n\r\n    if (isCompactLayout) {\r\n      styles.borderBottom = `1px solid ${fade(style.c, 40)}`;\r\n      styles['> a'] = {\r\n        display: 'flex',\r\n        margin: '0 auto',\r\n        maxWidth: px(640),\r\n        paddingBottom: '100%',\r\n        position: 'relative',\r\n\r\n        img: {\r\n          display: 'block',\r\n          bottom: 0,\r\n          left: 0,\r\n          maxWidth: '100%',\r\n          position: 'absolute',\r\n          right: 0,\r\n          top: 0,\r\n        },\r\n      };\r\n    } else {\r\n      styles.alignItems = 'center';\r\n      styles.display = 'flex';\r\n      styles.minHeight = px(80);\r\n      styles['@media (max-width: 767px)'] = {\r\n        borderBottom: `1px solid ${fade(style.c, 40)}`,\r\n        paddingLeft: px(8),\r\n        display: 'none',\r\n        width: '100%',\r\n      };\r\n      styles.img = {\r\n        height: px(imageSize),\r\n        width: px(imageSize),\r\n      };\r\n      styles['&.rswp__active'] = {\r\n        '@media (max-width: 767px)': {\r\n          display: 'flex',\r\n        },\r\n      };\r\n    }\r\n\r\n    return {\r\n      button: {\r\n        color: style.c,\r\n\r\n        '&.rswp__active': {\r\n          color: style.activeColor,\r\n        },\r\n      },\r\n\r\n      ...styles,\r\n    };\r\n  },\r\n  'InfoRSWP',\r\n);\r\n\r\nconst ContentWrapper = styled('div')(\r\n  {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n\r\n    '> a': {\r\n      fontSize: px(22),\r\n      marginTop: px(4),\r\n    },\r\n  },\r\n  ({ style }: StyledProps) => {\r\n    const isCompactLayout = style.layout === 'compact';\r\n    const styles: CssLikeObject = {};\r\n\r\n    if (isCompactLayout) {\r\n      styles.padding = px(8);\r\n      styles.width = '100%';\r\n    } else {\r\n      styles.minHeight = px(imageSize);\r\n\r\n      if (!style.hideCoverArt) {\r\n        styles.marginLeft = px(8);\r\n        styles.width = `calc(100% - ${px(imageSize + 8)})`;\r\n      } else {\r\n        styles.width = '100%';\r\n      }\r\n    }\r\n\r\n    return styles;\r\n  },\r\n  'ContentWrapperRSWP',\r\n);\r\n\r\nconst Content = styled('div')(\r\n  {\r\n    display: 'flex',\r\n    justifyContent: 'start',\r\n\r\n    '[data-type=\"title-artist-wrapper\"]': {\r\n      overflow: 'hidden',\r\n\r\n      div: {\r\n        marginLeft: `-${px(8)}`,\r\n        whiteSpace: 'nowrap',\r\n      },\r\n    },\r\n\r\n    p: {\r\n      fontSize: px(14),\r\n      lineHeight: 1.3,\r\n      paddingLeft: px(8),\r\n      paddingRight: px(8),\r\n      width: '100%',\r\n\r\n      '&:nth-of-type(1)': {\r\n        alignItems: 'center',\r\n        display: 'inline-flex',\r\n      },\r\n\r\n      '&:nth-of-type(2)': {\r\n        fontSize: px(12),\r\n      },\r\n    },\r\n\r\n    span: {\r\n      display: 'inline-block',\r\n    },\r\n  },\r\n  ({ style }: StyledProps) => {\r\n    return {\r\n      '[data-type=\"title-artist-wrapper\"]': {\r\n        color: style.trackNameColor,\r\n        maxWidth: `calc(100% - ${px(style.showSaveIcon ? iconSize : 0)})`,\r\n\r\n        div: {\r\n          '-webkit-mask-image': `linear-gradient(90deg,transparent 0, ${style.bgColor} 6px, ${style.bgColor} calc(100% - 12px),transparent)`,\r\n        },\r\n      },\r\n      p: {\r\n        '&:nth-of-type(1)': {\r\n          color: style.trackNameColor,\r\n\r\n          a: {\r\n            color: style.trackNameColor,\r\n          },\r\n        },\r\n\r\n        '&:nth-of-type(2)': {\r\n          color: style.trackArtistColor,\r\n\r\n          a: {\r\n            color: style.trackArtistColor,\r\n          },\r\n        },\r\n      },\r\n    };\r\n  },\r\n  'ContentRSWP',\r\n);\r\n\r\nfunction Info(props: Props) {\r\n  const {\r\n    hideAttribution,\r\n    hideCoverArt,\r\n    isActive,\r\n    layout,\r\n    locale,\r\n    onFavoriteStatusChange,\r\n    showSaveIcon,\r\n    styles: { activeColor, bgColor, color, height, trackArtistColor, trackNameColor },\r\n    token,\r\n    track: { artists = [], id, image, name, uri },\r\n    updateSavedStatus,\r\n  } = props;\r\n  const [isSaved, setIsSaved] = useState(false);\r\n  const isMounted = useRef(false);\r\n  const previousId = usePrevious(id);\r\n  const isCompactLayout = layout === 'compact';\r\n\r\n  const updateState = (state: boolean) => {\r\n    if (!isMounted.current) {\r\n      return;\r\n    }\r\n\r\n    setIsSaved(state);\r\n  };\r\n\r\n  const setStatus = async () => {\r\n    if (!isMounted.current) {\r\n      return;\r\n    }\r\n\r\n    if (updateSavedStatus && id) {\r\n      updateSavedStatus((newStatus: boolean) => {\r\n        updateState(newStatus);\r\n      });\r\n    }\r\n\r\n    const status = await checkTracksStatus(token, id);\r\n    const [isFavorite] = status || [false];\r\n\r\n    updateState(isFavorite);\r\n    onFavoriteStatusChange(isSaved);\r\n  };\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n\r\n    if (showSaveIcon && id) {\r\n      setStatus();\r\n    }\r\n\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (showSaveIcon && previousId !== id && id) {\r\n      updateState(false);\r\n\r\n      setStatus();\r\n    }\r\n  });\r\n\r\n  const handleClickIcon = async () => {\r\n    if (isSaved) {\r\n      await removeTracks(token, id);\r\n      updateState(false);\r\n    } else {\r\n      await saveTracks(token, id);\r\n      updateState(true);\r\n    }\r\n\r\n    onFavoriteStatusChange(!isSaved);\r\n  };\r\n\r\n  const title = getSpotifyLinkTitle(name, locale.title);\r\n  let favorite;\r\n\r\n  /* istanbul ignore else */\r\n  if (showSaveIcon && id) {\r\n    favorite = (\r\n      <button\r\n        aria-label={isSaved ? locale.removeTrack : locale.saveTrack}\r\n        className={isSaved ? 'rswp__active' : undefined}\r\n        onClick={handleClickIcon}\r\n        title={isSaved ? locale.removeTrack : locale.saveTrack}\r\n        type=\"button\"\r\n      >\r\n        {isSaved ? <Favorite /> : <FavoriteOutline />}\r\n      </button>\r\n    );\r\n  }\r\n\r\n  const content: Record<string, ReactNode> = {};\r\n  const classes = [];\r\n\r\n  if (isActive) {\r\n    classes.push('rswp__active');\r\n  }\r\n\r\n  if (isCompactLayout) {\r\n    content.image = <img alt={name} src={image} />;\r\n  }\r\n\r\n  if (!id) {\r\n    return <div />;\r\n  }\r\n\r\n  return (\r\n    <Wrapper\r\n      className={classes.join(' ')}\r\n      data-component-name=\"Info\"\r\n      style={{\r\n        activeColor,\r\n        c: color,\r\n        h: height,\r\n        layout,\r\n        showSaveIcon,\r\n      }}\r\n    >\r\n      {!hideCoverArt && (\r\n        <a\r\n          aria-label={title}\r\n          href={getSpotifyLink(uri)}\r\n          rel=\"noreferrer\"\r\n          target=\"_blank\"\r\n          title={title}\r\n        >\r\n          <img alt={name} src={image} />\r\n        </a>\r\n      )}\r\n      <ContentWrapper\r\n        style={{\r\n          hideCoverArt,\r\n          layout,\r\n          showSaveIcon,\r\n        }}\r\n      >\r\n        {!!name && (\r\n          <Content\r\n            style={{\r\n              bgColor,\r\n              layout,\r\n              showSaveIcon,\r\n              trackArtistColor,\r\n              trackNameColor,\r\n            }}\r\n          >\r\n            <div data-type=\"title-artist-wrapper\">\r\n              <div>\r\n                <p>\r\n                  <span>\r\n                    <a\r\n                      aria-label={title}\r\n                      href={getSpotifyLink(uri)}\r\n                      rel=\"noreferrer\"\r\n                      target=\"_blank\"\r\n                      title={title}\r\n                    >\r\n                      {name}\r\n                    </a>\r\n                  </span>\r\n                </p>\r\n                <p title={artists.map(d => d.name).join(', ')}>\r\n                  {artists.map((artist, index) => {\r\n                    const artistTitle = getSpotifyLinkTitle(artist.name, locale.title);\r\n\r\n                    return (\r\n                      <span key={artist.uri}>\r\n                        {index ? ', ' : ''}\r\n                        <a\r\n                          aria-label={artistTitle}\r\n                          href={getSpotifyLink(artist.uri)}\r\n                          rel=\"noreferrer\"\r\n                          target=\"_blank\"\r\n                          title={artistTitle}\r\n                        >\r\n                          {artist.name}\r\n                        </a>\r\n                      </span>\r\n                    );\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            {favorite}\r\n          </Content>\r\n        )}\r\n        {!hideAttribution && (\r\n          <a\r\n            aria-label=\"Play on Spotify\"\r\n            href={getSpotifyLink(uri)}\r\n            rel=\"noreferrer\"\r\n            target=\"_blank\"\r\n          >\r\n            <SpotifyLogo bgColor={bgColor} />\r\n          </a>\r\n        )}\r\n      </ContentWrapper>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default memo(Info);\r\n","import React from \"react\"\r\n\r\nexport default function Favorite(props: any) {\r\n  return (\r\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\r\n      <path\r\n        d=\"M63.673 16.52A17.676 17.676 0 0 0 49.197 2.563c-5.4-.861-10.891.852-14.844 4.63a3.43 3.43 0 0 1-4.672 0C22.956.689 12.305.62 5.498 7.039c-6.808 6.419-7.366 17.055-1.268 24.15l24.246 28.894a4.623 4.623 0 0 0 7.078 0L59.8 31.19a17.328 17.328 0 0 0 3.873-14.66v-.008Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\"\r\n\r\nexport default function FavoriteOutline(props: any) {\r\n  return (\r\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 64 64\" width=\"1em\" {...props}>\r\n      <path\r\n        d=\"M5.944 7.206C13.271.3 24.723.34 31.999 7.3A18.924 18.924 0 0 1 48.02 2.32h.008a19.068 19.068 0 0 1 15.617 15.071v.013A18.759 18.759 0 0 1 59.47 33.26L37.573 59.353a7.288 7.288 0 0 1-8.642 1.916 7.276 7.276 0 0 1-2.498-1.912l-21.901-26.1c-6.55-7.671-5.93-19.131 1.408-26.051h.004Zm13.04 1.04a12.726 12.726 0 0 0-9.737 20.997l.021.02 21.905 26.105c.316.372.84.488 1.284.285.143-.066.27-.164.372-.285l21.934-26.137a12.565 12.565 0 0 0 2.808-10.625 12.875 12.875 0 0 0-10.534-10.17 12.714 12.714 0 0 0-10.785 3.37l-.029.029a6.198 6.198 0 0 1-8.444 0l-.037-.033a12.727 12.727 0 0 0-8.758-3.556Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\"\r\nimport { textColor } from 'colorizr';\r\n\r\ninterface Props {\r\n  bgColor: string;\r\n}\r\n\r\nexport default function SpotifyLogo({ bgColor, ...rest }: Props) {\r\n  return (\r\n    <svg height=\"1em\" preserveAspectRatio=\"xMidYMid\" viewBox=\"0 0 512 160\" width=\"3.2em\" {...rest}>\r\n      <path\r\n        d=\"M79.655 0C35.664 0 0 35.663 0 79.654c0 43.993 35.664 79.653 79.655 79.653 43.996 0 79.656-35.66 79.656-79.653 0-43.988-35.66-79.65-79.657-79.65L79.655 0Zm36.53 114.884a4.963 4.963 0 0 1-6.83 1.646c-18.702-11.424-42.246-14.011-69.973-7.676a4.967 4.967 0 0 1-5.944-3.738 4.958 4.958 0 0 1 3.734-5.945c30.343-6.933 56.37-3.948 77.367 8.884a4.965 4.965 0 0 1 1.645 6.83Zm9.75-21.689c-1.799 2.922-5.622 3.845-8.543 2.047-21.41-13.16-54.049-16.972-79.374-9.284a6.219 6.219 0 0 1-7.75-4.138 6.22 6.22 0 0 1 4.141-7.745c28.929-8.778 64.892-4.526 89.48 10.583 2.92 1.798 3.843 5.622 2.045 8.538Zm.836-22.585C101.1 55.362 58.742 53.96 34.231 61.4c-3.936 1.194-8.098-1.028-9.29-4.964a7.453 7.453 0 0 1 4.965-9.294c28.137-8.542 74.912-6.892 104.469 10.655a7.441 7.441 0 0 1 2.606 10.209c-2.092 3.54-6.677 4.707-10.206 2.605h-.004Zm89.944 2.922c-13.754-3.28-16.198-5.581-16.198-10.418 0-4.57 4.299-7.645 10.7-7.645 6.202 0 12.347 2.336 18.796 7.143.19.145.437.203.675.165a.888.888 0 0 0 .6-.367l6.715-9.466a.903.903 0 0 0-.171-1.225c-7.676-6.157-16.313-9.15-26.415-9.15-14.848 0-25.225 8.911-25.225 21.662 0 13.673 8.95 18.515 24.417 22.252 13.155 3.031 15.38 5.57 15.38 10.11 0 5.032-4.49 8.161-11.718 8.161-8.028 0-14.582-2.71-21.906-9.046a.932.932 0 0 0-.656-.218.89.89 0 0 0-.619.313l-7.533 8.96a.906.906 0 0 0 .086 1.256c8.522 7.61 19.004 11.624 30.323 11.624 16 0 26.339-8.742 26.339-22.277.028-11.421-6.81-17.746-23.561-21.821l-.029-.013Zm59.792-13.564c-6.934 0-12.622 2.732-17.321 8.33v-6.3c0-.498-.4-.903-.894-.903h-12.318a.899.899 0 0 0-.894.902v70.009c0 .494.4.903.894.903h12.318a.901.901 0 0 0 .894-.903v-22.097c4.699 5.26 10.387 7.838 17.32 7.838 12.89 0 25.94-9.92 25.94-28.886.019-18.97-13.032-28.894-25.93-28.894l-.01.001Zm11.614 28.893c0 9.653-5.945 16.397-14.468 16.397-8.418 0-14.772-7.048-14.772-16.397 0-9.35 6.354-16.397 14.772-16.397 8.38 0 14.468 6.893 14.468 16.396Zm47.759-28.893c-16.598 0-29.601 12.78-29.601 29.1 0 16.143 12.917 28.784 29.401 28.784 16.655 0 29.696-12.736 29.696-28.991 0-16.2-12.955-28.89-29.496-28.89v-.003Zm0 45.385c-8.827 0-15.485-7.096-15.485-16.497 0-9.444 6.43-16.298 15.285-16.298 8.884 0 15.58 7.093 15.58 16.504 0 9.443-6.468 16.291-15.38 16.291Zm64.937-44.258h-13.554V47.24c0-.497-.4-.902-.894-.902H374.05a.906.906 0 0 0-.904.902v13.855h-5.916a.899.899 0 0 0-.894.902v10.584a.9.9 0 0 0 .894.903h5.916v27.39c0 11.062 5.508 16.674 16.38 16.674 4.413 0 8.075-.914 11.528-2.873a.88.88 0 0 0 .457-.78v-10.083a.896.896 0 0 0-.428-.76.873.873 0 0 0-.876-.039c-2.368 1.19-4.66 1.741-7.229 1.741-3.947 0-5.716-1.798-5.716-5.812V73.49h13.554a.899.899 0 0 0 .894-.903V62.003a.873.873 0 0 0-.884-.903l-.01-.005Zm47.217.054v-1.702c0-5.006 1.921-7.238 6.22-7.238 2.57 0 4.633.51 6.945 1.28a.895.895 0 0 0 1.18-.858l-.001-10.377a.891.891 0 0 0-.637-.865c-2.435-.726-5.555-1.47-10.235-1.47-11.367 0-17.388 6.405-17.388 18.516v2.606h-5.916a.906.906 0 0 0-.904.902v10.638c0 .497.41.903.904.903h5.916v42.237c0 .504.41.904.904.904h12.308c.504 0 .904-.4.904-.904V73.487h11.5l17.616 42.234c-1.998 4.433-3.967 5.317-6.65 5.317-2.168 0-4.46-.646-6.79-1.93a.98.98 0 0 0-.714-.067.896.896 0 0 0-.533.485l-4.175 9.16a.9.9 0 0 0 .39 1.17c4.356 2.359 8.284 3.367 13.145 3.367 9.093 0 14.125-4.242 18.548-15.637l21.364-55.204a.88.88 0 0 0-.095-.838.878.878 0 0 0-.733-.392h-12.822a.901.901 0 0 0-.856.605l-13.136 37.509-14.382-37.534a.898.898 0 0 0-.837-.58h-21.04v-.003Zm-27.375-.054h-12.318a.907.907 0 0 0-.903.902v53.724c0 .504.409.904.903.904h12.318c.495 0 .904-.4.904-.904v-53.72a.9.9 0 0 0-.904-.903v-.003Zm-6.088-24.464c-4.88 0-8.836 3.95-8.836 8.828a8.835 8.835 0 0 0 8.836 8.836c4.88 0 8.827-3.954 8.827-8.836a8.83 8.83 0 0 0-8.827-8.828Z\"\r\n        fill={textColor(bgColor)}\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import { Locale, StylesOptions, StylesProps } from '../types';\r\n\r\nexport function getLocale(locale?: Partial<Locale>): Locale {\r\n  return {\r\n    currentDevice: 'Current device',\r\n    devices: 'Devices',\r\n    next: 'Next',\r\n    otherDevices: 'Select other device',\r\n    pause: 'Pause',\r\n    play: 'Play',\r\n    previous: 'Previous',\r\n    removeTrack: 'Remove from your favorites',\r\n    saveTrack: 'Save to your favorites',\r\n    title: '{name} on SPOTIFY',\r\n    volume: 'Volume',\r\n    ...locale,\r\n  };\r\n}\r\n\r\nexport function getMergedStyles(styles?: StylesProps): StylesOptions {\r\n  return {\r\n    activeColor: '#1cb954',\r\n    altColor: '#ccc',\r\n    bgColor: '#fff',\r\n    color: '#333',\r\n    errorColor: '#ff0026',\r\n    height: 80,\r\n    loaderColor: '#ccc',\r\n    loaderSize: 32,\r\n    sliderColor: '#666',\r\n    sliderHandleBorderRadius: '50%',\r\n    sliderHandleColor: '#000',\r\n    sliderHeight: 4,\r\n    sliderTrackBorderRadius: 4,\r\n    sliderTrackColor: '#ccc',\r\n    trackArtistColor: '#666',\r\n    trackNameColor: '#333',\r\n    ...styles,\r\n  };\r\n}\r\n\r\nexport function getSpotifyLink(uri: string): string {\r\n  const [, type = '', id = ''] = uri.split(':');\r\n\r\n  return `https://open.spotify.com/${type}/${id}`;\r\n}\r\n\r\nexport function getSpotifyLinkTitle(name: string, locale: string): string {\r\n  return locale.replace('{name}', name);\r\n}\r\n\r\nexport function getSpotifyURIType(uri: string): string {\r\n  const [, type = ''] = uri.split(':');\r\n\r\n  return type;\r\n}\r\n","import { useEffect, useRef, useState } from 'react';\r\n\r\nexport function useMediaQuery(input: string): boolean {\r\n  const getMatches = (query: string): boolean => {\r\n    return window.matchMedia(query).matches;\r\n  };\r\n\r\n  const [matches, setMatches] = useState<boolean>(getMatches(input));\r\n\r\n  function handleChange() {\r\n    setMatches(getMatches(input));\r\n  }\r\n\r\n  useEffect(() => {\r\n    const matchMedia = window.matchMedia(input);\r\n\r\n    // Triggered at the first client-side load and if query changes\r\n    handleChange();\r\n\r\n    try {\r\n      matchMedia.addEventListener('change', handleChange);\r\n    } catch {\r\n      // Safari isn't supporting matchMedia.addEventListener\r\n      /* istanbul ignore next */\r\n      matchMedia.addListener(handleChange);\r\n    }\r\n\r\n    return () => {\r\n      try {\r\n        matchMedia.removeEventListener('change', handleChange);\r\n      } catch {\r\n        // Safari isn't supporting matchMedia.removeEventListener\r\n        /* istanbul ignore next */\r\n        matchMedia.removeListener(handleChange);\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [input]);\r\n\r\n  return matches;\r\n}\r\n\r\nexport function usePrevious<T>(value: T): T {\r\n  const ref: any = useRef<T>();\r\n\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]);\r\n\r\n  return ref.current;\r\n}\r\n","/* eslint-disable camelcase */\r\nimport { SpotifyPlayOptions } from '../types';\r\n\r\nexport async function checkTracksStatus(token: string, tracks: string | string[]) {\r\n  const ids = Array.isArray(tracks) ? tracks : [tracks];\r\n\r\n  return fetch(`https://api.spotify.com/v1/me/tracks/contains?ids=${ids}`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'GET',\r\n  }).then(d => d.json());\r\n}\r\n\r\nexport async function getDevices(token: string) {\r\n  return fetch(`https://api.spotify.com/v1/me/player/devices`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'GET',\r\n  }).then(d => d.json());\r\n}\r\n\r\nexport async function getPlaybackState(token: string) {\r\n  return fetch(`https://api.spotify.com/v1/me/player`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'GET',\r\n  }).then(d => {\r\n    if (d.status === 204) {\r\n      return null;\r\n    }\r\n\r\n    return d.json();\r\n  });\r\n}\r\n\r\nexport async function pause(token: string) {\r\n  return fetch(`https://api.spotify.com/v1/me/player/pause`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'PUT',\r\n  });\r\n}\r\n\r\nexport async function play(\r\n  token: string,\r\n  { context_uri, deviceId, offset = 0, uris }: SpotifyPlayOptions,\r\n) {\r\n  let body;\r\n\r\n  if (context_uri) {\r\n    const isArtist = context_uri.indexOf('artist') >= 0;\r\n    let position;\r\n\r\n    /* istanbul ignore else */\r\n    if (!isArtist) {\r\n      position = { position: offset };\r\n    }\r\n\r\n    body = JSON.stringify({ context_uri, offset: position });\r\n  } else if (Array.isArray(uris) && uris.length) {\r\n    body = JSON.stringify({ uris, offset: { position: offset } });\r\n  }\r\n\r\n  return fetch(`https://api.spotify.com/v1/me/player/play?device_id=${deviceId}`, {\r\n    body,\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'PUT',\r\n  });\r\n}\r\n\r\nexport async function previous(token: string) {\r\n  return fetch(`https://api.spotify.com/v1/me/player/previous`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'POST',\r\n  });\r\n}\r\n\r\nexport async function next(token: string) {\r\n  return fetch(`https://api.spotify.com/v1/me/player/next`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'POST',\r\n  });\r\n}\r\n\r\nexport async function removeTracks(token: string, tracks: string | string[]) {\r\n  const ids = Array.isArray(tracks) ? tracks : [tracks];\r\n\r\n  return fetch(`https://api.spotify.com/v1/me/tracks`, {\r\n    body: JSON.stringify(ids),\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'DELETE',\r\n  });\r\n}\r\n\r\nexport async function saveTracks(token: string, tracks: string | string[]) {\r\n  const ids = Array.isArray(tracks) ? tracks : [tracks];\r\n\r\n  return fetch(`https://api.spotify.com/v1/me/tracks`, {\r\n    body: JSON.stringify({ ids }),\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'PUT',\r\n  });\r\n}\r\n\r\nexport async function seek(token: string, position: number) {\r\n  return fetch(`https://api.spotify.com/v1/me/player/seek?position_ms=${position}`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'PUT',\r\n  });\r\n}\r\n\r\nexport async function setDevice(token: string, deviceId: string, shouldPlay?: boolean) {\r\n  return fetch(`https://api.spotify.com/v1/me/player`, {\r\n    body: JSON.stringify({ device_ids: [deviceId], play: shouldPlay }),\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'PUT',\r\n  });\r\n}\r\n\r\nexport async function setVolume(token: string, volume: number) {\r\n  return fetch(`https://api.spotify.com/v1/me/player/volume?volume_percent=${volume}`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    method: 'PUT',\r\n  });\r\n}\r\n","import React from \"react\"\r\n\r\nimport { keyframes, px, styled } from '../modules/styled';\r\nimport { ComponentsProps, StyledProps } from '../types';\r\n\r\nconst Wrapper = styled('div')(\r\n  {\r\n    alignItems: 'center',\r\n    display: 'flex',\r\n    jsutifyContent: 'center',\r\n    position: 'relative',\r\n\r\n    '> div': {\r\n      borderRadius: '50%',\r\n      borderStyle: 'solid',\r\n      borderWidth: 0,\r\n      boxSizing: 'border-box',\r\n      height: 0,\r\n      left: '50%',\r\n      position: 'absolute',\r\n      top: '50%',\r\n      transform: 'translate(-50%, -50%)',\r\n      width: 0,\r\n    },\r\n  },\r\n  ({ style }: StyledProps) => {\r\n    const pulse = keyframes!({\r\n      '0%': {\r\n        height: 0,\r\n        width: 0,\r\n      },\r\n\r\n      '30%': {\r\n        borderWidth: px(8),\r\n        height: px(style.loaderSize),\r\n        opacity: 1,\r\n        width: px(style.loaderSize),\r\n      },\r\n\r\n      '100%': {\r\n        borderWidth: 0,\r\n        height: px(style.loaderSize),\r\n        opacity: 0,\r\n        width: px(style.loaderSize),\r\n      },\r\n    });\r\n\r\n    return {\r\n      height: px(style.h),\r\n\r\n      '> div': {\r\n        animation: `${pulse} 1.15s infinite cubic-bezier(0.215, 0.61, 0.355, 1)`,\r\n        borderColor: style.loaderColor,\r\n        height: px(style.loaderSize),\r\n        width: px(style.loaderSize),\r\n      },\r\n    };\r\n  },\r\n  'LoaderRSWP',\r\n);\r\n\r\nexport default function Loader({ styles: { height, loaderColor, loaderSize } }: ComponentsProps) {\r\n  return (\r\n    <Wrapper data-component-name=\"Loader\" style={{ h: height, loaderColor, loaderSize }}>\r\n      <div />\r\n    </Wrapper>\r\n  );\r\n}\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport RangeSlider, { RangeSliderPosition } from '@gilbarbara/react-range-slider';\r\n\r\nimport ClickOutside from './ClickOutside';\r\nimport VolumeHigh from './icons/VolumeHigh';\r\nimport VolumeLow from './icons/VolumeLow';\r\nimport VolumeMid from './icons/VolumeMid';\r\nimport VolumeMute from './icons/VolumeMute';\r\n\r\nimport { useMediaQuery, usePrevious } from '../modules/hooks';\r\nimport { CssLikeObject, px, styled } from '../modules/styled';\r\nimport { Layout, Locale, StyledProps, StylesOptions } from '../types';\r\n\r\ninterface Props {\r\n  inlineVolume: boolean;\r\n  layout: Layout;\r\n  locale: Locale;\r\n  playerPosition: string;\r\n  setVolume: (volume: number) => any;\r\n  styles: StylesOptions;\r\n  volume: number;\r\n}\r\n\r\nconst WrapperWithToggle = styled('div')(\r\n  {\r\n    display: 'none',\r\n    'pointer-events': 'all',\r\n    position: 'relative',\r\n    zIndex: 20,\r\n\r\n    '> div': {\r\n      alignItems: 'center',\r\n      backgroundColor: '#000',\r\n      borderRadius: px(4),\r\n      color: '#fff',\r\n      display: 'flex',\r\n      filter: 'drop-shadow(1px 1px 6px rgba(0, 0, 0, 0.5))',\r\n      flexDirection: 'column',\r\n      left: '-4px',\r\n      padding: px(16),\r\n      position: 'absolute',\r\n\r\n      '> span': {\r\n        background: 'transparent',\r\n        borderLeft: `6px solid transparent`,\r\n        borderRight: `6px solid transparent`,\r\n        content: '\"\"',\r\n        display: 'block',\r\n        height: 0,\r\n        position: 'absolute',\r\n        width: 0,\r\n      },\r\n    },\r\n\r\n    '> button': {\r\n      alignItems: 'center',\r\n      display: 'flex',\r\n      fontSize: px(24),\r\n      height: px(32),\r\n      justifyContent: 'center',\r\n      width: px(32),\r\n    },\r\n\r\n    '@media (any-pointer: fine)': {\r\n      display: 'block',\r\n    },\r\n  },\r\n  ({ style }: StyledProps) => {\r\n    const isCompact = style.layout === 'compact';\r\n    const spanStyles: CssLikeObject = isCompact\r\n      ? {\r\n          bottom: `-${px(6)}`,\r\n          borderTop: `6px solid #000`,\r\n        }\r\n      : {\r\n          [style.p === 'top' ? 'border-bottom' : 'border-top']: `6px solid #000`,\r\n          [style.p]: '-6px',\r\n        };\r\n\r\n    return {\r\n      '> button': {\r\n        color: style.c,\r\n      },\r\n      '> div': {\r\n        [isCompact ? 'bottom' : style.p]: '130%',\r\n\r\n        '> span': spanStyles,\r\n      },\r\n    };\r\n  },\r\n  'VolumeRSWP',\r\n);\r\n\r\nconst WrapperInline = styled('div')(\r\n  {\r\n    display: 'none',\r\n    padding: `0 ${px(8)}`,\r\n    'pointer-events': 'all',\r\n\r\n    '> div': {\r\n      display: 'flex',\r\n      padding: `0 ${px(5)}`,\r\n      width: px(100),\r\n    },\r\n\r\n    '> span': {\r\n      display: 'flex',\r\n      fontSize: px(24),\r\n    },\r\n\r\n    '@media (any-pointer: fine)': {\r\n      alignItems: 'center',\r\n      display: 'flex',\r\n    },\r\n  },\r\n  ({ style }) => ({\r\n    color: style.c,\r\n  }),\r\n  'VolumeInlineRSWP',\r\n);\r\n\r\nexport default function Volume(props: Props) {\r\n  const { inlineVolume, layout, locale, playerPosition, setVolume, styles, volume } = props;\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [volumeState, setVolumeState] = useState(volume);\r\n  const timeoutRef = useRef<number>();\r\n  const previousVolume = usePrevious(volume);\r\n  const isMediumScreen = useMediaQuery('(min-width: 768px)');\r\n  const isInline = layout === 'responsive' && inlineVolume && isMediumScreen;\r\n\r\n  useEffect(() => {\r\n    if (previousVolume !== volume && volume !== volumeState) {\r\n      setVolumeState(volume);\r\n    }\r\n  }, [previousVolume, volume, volumeState]);\r\n\r\n  const handleClickToggleList = useCallback(() => {\r\n    setIsOpen(s => !s);\r\n  }, []);\r\n\r\n  const handleChangeSlider = ({ x, y }: RangeSliderPosition) => {\r\n    const value = isInline ? x : y;\r\n    const currentvolume = Math.round(value) / 100;\r\n\r\n    clearTimeout(timeoutRef.current);\r\n\r\n    // timeoutRef.current = window.setTimeout(() => {\r\n      setVolume(currentvolume);\r\n    // }, 250);\r\n\r\n    setVolumeState(currentvolume);\r\n  };\r\n\r\n  const handleAfterEnd = () => {\r\n    setTimeout(() => {\r\n      setIsOpen(false);\r\n    }, 100);\r\n  };\r\n\r\n  let icon = <VolumeHigh />;\r\n\r\n  if (volume === 0) {\r\n    icon = <VolumeMute />;\r\n  } else if (volume <= 0.4) {\r\n    icon = <VolumeLow />;\r\n  } else if (volume <= 0.7) {\r\n    icon = <VolumeMid />;\r\n  }\r\n\r\n  if (isInline) {\r\n    return (\r\n      <WrapperInline data-component-name=\"Volume\" data-value={volume} style={{ c: styles.color }}>\r\n        <span>{icon}</span>\r\n        <div>\r\n          <RangeSlider\r\n            axis=\"x\"\r\n            className=\"volume\"\r\n            data-component-name=\"volume-bar\"\r\n            onAfterEnd={handleAfterEnd}\r\n            onChange={handleChangeSlider}\r\n            styles={{\r\n              options: {\r\n                thumbBorder: 0,\r\n                thumbBorderRadius: styles.sliderHandleBorderRadius,\r\n                thumbColor: styles.sliderHandleColor,\r\n                height: styles.sliderHeight,\r\n                padding: 0,\r\n                rangeColor: styles.sliderColor,\r\n                trackBorderRadius: styles.sliderTrackBorderRadius,\r\n                trackColor: styles.sliderTrackColor,\r\n              },\r\n            }}\r\n            x={volume * 100}\r\n            xMax={100}\r\n            xMin={0}\r\n          />\r\n        </div>\r\n      </WrapperInline>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ClickOutside isActive={isOpen} onClick={handleClickToggleList}>\r\n      <WrapperWithToggle\r\n        data-component-name=\"Volume\"\r\n        data-value={volume}\r\n        style={{ c: styles.color, layout, p: playerPosition }}\r\n      >\r\n        {isOpen && (\r\n          <div>\r\n            <RangeSlider\r\n              axis=\"y\"\r\n              className=\"volume\"\r\n              data-component-name=\"volume-bar\"\r\n              onAfterEnd={handleAfterEnd}\r\n              onChange={handleChangeSlider}\r\n              styles={{\r\n                options: {\r\n                  padding: 0,\r\n                  rangeColor: '#fff',\r\n                  thumbBorder: 0,\r\n                  thumbBorderRadius: 12,\r\n                  thumbColor: '#fff',\r\n                  thumbSize: 12,\r\n                  trackColor: 'rgba(255, 255, 255, 0.5)',\r\n                  width: 6,\r\n                },\r\n              }}\r\n              y={volume * 100}\r\n              yMax={100}\r\n              yMin={0}\r\n            />\r\n            <span />\r\n          </div>\r\n        )}\r\n        <button\r\n          aria-label={locale.volume}\r\n          onClick={handleClickToggleList}\r\n          title={locale.volume}\r\n          type=\"button\"\r\n        >\r\n          {icon}\r\n        </button>\r\n      </WrapperWithToggle>\r\n    </ClickOutside>\r\n  );\r\n}\r\n","import React from \"react\"\r\n\r\nexport default function VolumeHigh(props: any) {\r\n  return (\r\n    <svg\r\n      data-component-name=\"VolumeHigh\"\r\n      height=\"1em\"\r\n      preserveAspectRatio=\"xMidYMid\"\r\n      viewBox=\"0 0 64 64\"\r\n      width=\"1em\"\r\n      {...props}\r\n    >\r\n      <path\r\n        d=\"M37.963 3.402a2.989 2.989 0 0 1 1.5 2.596v52a3 3 0 0 1-4.5 2.6l-27.7-16C.32 40.572-2.06 31.688 1.943 24.73a14.556 14.556 0 0 1 5.32-5.328l27.7-16a3 3 0 0 1 3 0ZM45 9.542a23.008 23.008 0 0 1 0 44.912V48.25a17.008 17.008 0 0 0 0-32.508Zm-11.532 1.656-23.2 13.4a8.556 8.556 0 0 0 0 14.8l23.2 13.4v-41.6ZM45 22.238a11 11 0 0 1 0 19.52v-19.52Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\"\r\n\r\nexport default function VolumeLow(props: any) {\r\n  return (\r\n    <svg\r\n      data-component-name=\"VolumeLow\"\r\n      height=\"1em\"\r\n      preserveAspectRatio=\"xMidYMid\"\r\n      viewBox=\"0 0 64 64\"\r\n      width=\"1em\"\r\n      {...props}\r\n    >\r\n      <path\r\n        d=\"M37.963 3.398a3 3 0 0 1 1.5 2.6v52a3 3 0 0 1-4.5 2.6l-27.7-16C.32 40.572-2.06 31.688 1.943 24.73a14.556 14.556 0 0 1 5.32-5.328l27.7-16a3 3 0 0 1 3 0v-.004Zm-27.696 21.2a8.556 8.556 0 0 0 0 14.8l23.2 13.4v-41.6l-23.2 13.4ZM45 41.758v-19.52a11 11 0 0 1 0 19.52Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\"\r\n\r\nexport default function VolumeHigh(props: any) {\r\n  return (\r\n    <svg\r\n      data-component-name=\"VolumeMid\"\r\n      height=\"1em\"\r\n      preserveAspectRatio=\"xMidYMid\"\r\n      viewBox=\"0 0 64 64\"\r\n      width=\"1em\"\r\n      {...props}\r\n    >\r\n      <path\r\n        d=\"M37.963 3.398a3 3 0 0 1 1.5 2.6v52a3 3 0 0 1-4.5 2.6l-27.7-16C.32 40.572-2.06 31.688 1.943 24.73a14.556 14.556 0 0 1 5.32-5.328l27.7-16a3 3 0 0 1 3 0v-.004Zm-27.696 21.2a8.556 8.556 0 0 0 0 14.8l23.2 13.4v-41.6l-23.2 13.4ZM45 48.946a18.008 18.008 0 0 0 0-33.896v6.6a11.996 11.996 0 0 1 0 20.7v6.596Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\"\r\n\r\nexport default function VolumeMute(props: any) {\r\n  return (\r\n    <svg\r\n      data-component-name=\"VolumeMute\"\r\n      height=\"1em\"\r\n      preserveAspectRatio=\"xMidYMid\"\r\n      viewBox=\"0 0 64 64\"\r\n      width=\"1em\"\r\n      {...props}\r\n    >\r\n      <path\r\n        d=\"M34.963 3.402a3 3 0 0 1 4.5 2.6v7.624a19.03 19.03 0 0 0-6 2.776v-5.2l-23.2 13.4a8.57 8.57 0 0 0-3.12 3.128 8.564 8.564 0 0 0 3.124 11.68l23.196 13.392v-5.2a18.92 18.92 0 0 0 6 2.776v7.624a3 3 0 0 1-4.5 2.596l-27.7-16a14.556 14.556 0 0 1-5.32-5.328C-2.06 32.313.32 23.428 7.263 19.402l27.7-16Zm17.354 17.6a3 3 0 0 1 2.122 5.12l-5.88 5.88 5.876 5.88a3 3 0 0 1-4.24 4.24l-5.88-5.88-5.88 5.88a3 3 0 1 1-4.385-4.095l6.025-6.025-5.876-5.88a3 3 0 0 1 4.236-4.24l5.88 5.88 5.88-5.88a3 3 0 0 1 2.122-.88Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React, { memo } from 'react';\r\n\r\nimport { CssLikeObject, px, styled } from '../modules/styled';\r\nimport { ComponentsProps, StyledProps } from '../types';\r\n\r\nconst StyledWrapper = styled('div')(\r\n  {\r\n    alignItems: 'center',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center',\r\n    position: 'relative',\r\n\r\n    '> *': {\r\n      width: '100%',\r\n    },\r\n  },\r\n  ({ style }: StyledProps) => {\r\n    let styles: CssLikeObject = {};\r\n\r\n    if (style.layout === 'responsive') {\r\n      styles = {\r\n       \r\n        \r\n\r\n        '@media (min-width: 768px)': {\r\n          flexDirection: 'row',\r\n          padding: `0 ${px(8)}`,\r\n        },\r\n      };\r\n    }\r\n\r\n    return {\r\n      ...styles,\r\n    };\r\n  },\r\n  'WrapperRSWP',\r\n);\r\n\r\nfunction Wrapper({ children, layout,\r\n  //  styles\r\n   }: ComponentsProps) {\r\n  return (\r\n    <StyledWrapper data-component-name=\"Wrapper\" style={{}}>\r\n      {children}\r\n    </StyledWrapper>\r\n  );\r\n}\r\n\r\nexport default memo(Wrapper);\r\n","export const ERROR_TYPE = {\r\n  ACCOUNT: 'account',\r\n  AUTHENTICATION: 'authentication',\r\n  INITIALIZATION: 'initialization',\r\n  PLAYBACK: 'playback',\r\n  PLAYER: 'player',\r\n} as const;\r\n\r\nexport const STATUS = {\r\n  ERROR: 'ERROR',\r\n  IDLE: 'IDLE',\r\n  INITIALIZING: 'INITIALIZING',\r\n  READY: 'READY',\r\n  RUNNING: 'RUNNING',\r\n  UNSUPPORTED: 'UNSUPPORTED',\r\n} as const;\r\n\r\nexport const TYPE = {\r\n  DEVICE: 'device_update',\r\n  FAVORITE: 'favorite_update',\r\n  PLAYER: 'player_update',\r\n  PROGRESS: 'progress_update',\r\n  STATUS: 'status_update',\r\n  TRACK: 'track_update',\r\n} as const;\r\n"]}